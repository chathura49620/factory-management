{"ast":null,"code":"var _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n} // Copyright (c) 2016 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport equal from 'deep-equal';\nimport { extractScalePropsFromProps, getMissingScaleProps, getOptionalScaleProps, getXYPlotValues } from '../utils/scales-utils';\nimport { getStackedData, getSeriesChildren, getSeriesPropsFromChildren } from '../utils/series-utils';\nimport { getInnerDimensions, MarginPropType, DEFAULT_MARGINS } from '../utils/chart-utils';\nimport { AnimationPropType } from '../animation';\nimport { CONTINUOUS_COLOR_RANGE, EXTENDED_DISCRETE_COLOR_RANGE, SIZE_RANGE, OPACITY_TYPE } from '../theme';\nimport CanvasWrapper from './series/canvas-wrapper';\nvar ATTRIBUTES = ['x', 'y', 'radius', 'angle', 'color', 'fill', 'stroke', 'opacity', 'size'];\n/**\n * Remove parents from tree formatted data. deep-equal doesnt play nice with data\n * that has circular structures, so we make every node single directional by pruning the parents.\n * @param {Array} data - the data object to have circular deps resolved in\n * @returns {Array} the sanitized data\n */\n\nfunction cleanseData(data) {\n  return data.map(function (series) {\n    if (!Array.isArray(series)) {\n      return series;\n    }\n\n    return series.map(function (row) {\n      return _extends({}, row, {\n        parent: null\n      });\n    });\n  });\n}\n/**\n * Wrapper on the deep-equal method for checking equality of next props vs current props\n * @param {Object} scaleMixins - Scale object.\n * @param {Object} nextScaleMixins - Scale object.\n * @param {Boolean} hasTreeStructure - Whether or not to cleanse the data of possible cyclic structures\n * @returns {Boolean} whether or not the two mixins objects are equal\n */\n\n\nfunction checkIfMixinsAreEqual(nextScaleMixins, scaleMixins, hasTreeStructure) {\n  var newMixins = _extends({}, nextScaleMixins, {\n    _allData: hasTreeStructure ? cleanseData(nextScaleMixins._allData) : nextScaleMixins._allData\n  });\n\n  var oldMixins = _extends({}, scaleMixins, {\n    _allData: hasTreeStructure ? cleanseData(scaleMixins._allData) : scaleMixins._allData\n  }); // it's hard to say if this function is reasonable?\n\n\n  return equal(newMixins, oldMixins);\n}\n\nvar XYPlot = function (_React$Component) {\n  _inherits(XYPlot, _React$Component);\n\n  _createClass(XYPlot, null, [{\n    key: 'defaultProps',\n    get: function get() {\n      return {\n        className: ''\n      };\n    }\n  }, {\n    key: 'propTypes',\n    get: function get() {\n      return {\n        animation: AnimationPropType,\n        className: PropTypes.string,\n        dontCheckIfEmpty: PropTypes.bool,\n        height: PropTypes.number.isRequired,\n        margin: MarginPropType,\n        onClick: PropTypes.func,\n        onDoubleClick: PropTypes.func,\n        onMouseDown: PropTypes.func,\n        onMouseUp: PropTypes.func,\n        onMouseEnter: PropTypes.func,\n        onMouseLeave: PropTypes.func,\n        onMouseMove: PropTypes.func,\n        onTouchStart: PropTypes.func,\n        onTouchMove: PropTypes.func,\n        onTouchEnd: PropTypes.func,\n        onTouchCancel: PropTypes.func,\n        onWheel: PropTypes.func,\n        stackBy: PropTypes.oneOf(ATTRIBUTES),\n        style: PropTypes.object,\n        width: PropTypes.number.isRequired\n      };\n    }\n  }]);\n\n  function XYPlot(props) {\n    _classCallCheck(this, XYPlot);\n\n    var _this = _possibleConstructorReturn(this, (XYPlot.__proto__ || Object.getPrototypeOf(XYPlot)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var stackBy = props.stackBy;\n    var children = getSeriesChildren(props.children);\n    var data = getStackedData(children, stackBy);\n    _this.state = {\n      scaleMixins: _this._getScaleMixins(data, props),\n      data: data\n    };\n    return _this;\n  }\n\n  _createClass(XYPlot, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var children = getSeriesChildren(nextProps.children);\n      var nextData = getStackedData(children, nextProps.stackBy);\n      var scaleMixins = this.state.scaleMixins;\n\n      var nextScaleMixins = this._getScaleMixins(nextData, nextProps);\n\n      if (!checkIfMixinsAreEqual(nextScaleMixins, scaleMixins, nextProps.hasTreeStructure)) {\n        this.setState({\n          scaleMixins: nextScaleMixins,\n          data: nextData\n        });\n      }\n    }\n    /**\n     * Trigger click related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Click event.\n     * @private\n     */\n\n    /**\n     * Trigger doule-click related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Double-click event.\n     * @private\n     */\n\n  }, {\n    key: '_getClonedChildComponents',\n\n    /**\n     * Prepare the child components (including series) for rendering.\n     * @returns {Array} Array of child components.\n     * @private\n     */\n    value: function _getClonedChildComponents() {\n      var _this2 = this;\n\n      var props = this.props;\n      var animation = this.props.animation;\n      var _state = this.state,\n          scaleMixins = _state.scaleMixins,\n          data = _state.data;\n      var dimensions = getInnerDimensions(this.props, DEFAULT_MARGINS);\n      var children = React.Children.toArray(this.props.children);\n      var seriesProps = getSeriesPropsFromChildren(children);\n      var XYPlotValues = getXYPlotValues(props, children);\n      return children.map(function (child, index) {\n        var dataProps = null;\n\n        if (seriesProps[index]) {\n          // Get the index of the series in the list of props and retrieve\n          // the data property from it.\n          var seriesIndex = seriesProps[index].seriesIndex;\n          dataProps = {\n            data: data[seriesIndex]\n          };\n        }\n\n        return React.cloneElement(child, _extends({}, dimensions, {\n          animation: animation\n        }, dataProps && child.type.prototype && child.type.prototype.render ? {\n          ref: function ref(_ref) {\n            return _this2['series' + seriesProps[index].seriesIndex] = _ref;\n          }\n        } : {}, seriesProps[index], scaleMixins, child.props, XYPlotValues[index], dataProps));\n      });\n    }\n    /**\n     * Get the list of scale-related settings that should be applied by default.\n     * @param {Object} props Object of props.\n     * @returns {Object} Defaults.\n     * @private\n     */\n\n  }, {\n    key: '_getDefaultScaleProps',\n    value: function _getDefaultScaleProps(props) {\n      var _getInnerDimensions = getInnerDimensions(props, DEFAULT_MARGINS),\n          innerWidth = _getInnerDimensions.innerWidth,\n          innerHeight = _getInnerDimensions.innerHeight;\n\n      var colorRanges = ['color', 'fill', 'stroke'].reduce(function (acc, attr) {\n        var range = props[attr + 'Type'] === 'category' ? EXTENDED_DISCRETE_COLOR_RANGE : CONTINUOUS_COLOR_RANGE;\n        return _extends({}, acc, _defineProperty({}, attr + 'Range', range));\n      }, {});\n      return _extends({\n        xRange: [0, innerWidth],\n        yRange: [innerHeight, 0]\n      }, colorRanges, {\n        opacityType: OPACITY_TYPE,\n        sizeRange: SIZE_RANGE\n      });\n    }\n    /**\n     * Get the map of scales from the props, apply defaults to them and then pass\n     * them further.\n     * @param {Object} data Array of all data.\n     * @param {Object} props Props of the component.\n     * @returns {Object} Map of scale-related props.\n     * @private\n     */\n\n  }, {\n    key: '_getScaleMixins',\n    value: function _getScaleMixins(data, props) {\n      var _ref2;\n\n      var filteredData = data.filter(function (d) {\n        return d;\n      });\n\n      var allData = (_ref2 = []).concat.apply(_ref2, _toConsumableArray(filteredData));\n\n      var defaultScaleProps = this._getDefaultScaleProps(props);\n\n      var optionalScaleProps = getOptionalScaleProps(props);\n      var userScaleProps = extractScalePropsFromProps(props, ATTRIBUTES);\n      var missingScaleProps = getMissingScaleProps(_extends({}, defaultScaleProps, optionalScaleProps, userScaleProps), allData, ATTRIBUTES);\n      var children = getSeriesChildren(props.children);\n      var zeroBaseProps = {};\n      var adjustBy = new Set();\n      var adjustWhat = new Set();\n      children.forEach(function (child, index) {\n        if (!child || !data[index]) {\n          return;\n        }\n\n        ATTRIBUTES.forEach(function (attr) {\n          var _child$type$getParent = child.type.getParentConfig(attr, child.props),\n              isDomainAdjustmentNeeded = _child$type$getParent.isDomainAdjustmentNeeded,\n              zeroBaseValue = _child$type$getParent.zeroBaseValue;\n\n          if (isDomainAdjustmentNeeded) {\n            adjustBy.add(attr);\n            adjustWhat.add(index);\n          }\n\n          if (zeroBaseValue) {\n            var specifiedDomain = props[attr + 'Domain'];\n            zeroBaseProps[attr + 'BaseValue'] = specifiedDomain ? specifiedDomain[0] : 0;\n          }\n        });\n      });\n      return _extends({}, defaultScaleProps, zeroBaseProps, userScaleProps, missingScaleProps, {\n        _allData: data,\n        _adjustBy: Array.from(adjustBy),\n        _adjustWhat: Array.from(adjustWhat),\n        _stackBy: props.stackBy\n      });\n    }\n    /**\n     * Checks if the plot is empty or not.\n     * Currently checks the data only.\n     * @returns {boolean} True for empty.\n     * @private\n     */\n\n  }, {\n    key: '_isPlotEmpty',\n    value: function _isPlotEmpty() {\n      var data = this.state.data;\n      return !data || !data.length || !data.some(function (series) {\n        return series && series.some(function (d) {\n          return d;\n        });\n      });\n    }\n    /**\n     * Trigger mouse-down related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Mouse down event.\n     * @private\n     */\n\n    /**\n     * Trigger onMouseEnter handler if it was passed in props.\n     * @param {React.SyntheticEvent} event Mouse enter event.\n     * @private\n     */\n\n    /**\n     * Trigger onMouseLeave handler if it was passed in props.\n     * @param {React.SyntheticEvent} event Mouse leave event.\n     * @private\n     */\n\n    /**\n     * Trigger movement-related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Mouse move event.\n     * @private\n     */\n\n    /**\n     * Trigger mouse-up related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Mouse up event.\n     * @private\n     */\n\n    /**\n     * Trigger onTouchCancel handler if it was passed in props.\n     * @param {React.SyntheticEvent} event Touch Cancel event.\n     * @private\n     */\n\n    /**\n     * Trigger onTouchEnd handler if it was passed in props.\n     * @param {React.SyntheticEvent} event Touch End event.\n     * @private\n     */\n\n    /**\n     * Trigger touch movement-related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Touch move event.\n     * @private\n     */\n\n    /**\n     * Trigger touch-start related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Touch start event.\n     * @private\n     */\n\n    /**\n     * Trigger doule-click related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Double-click event.\n     * @private\n     */\n\n  }, {\n    key: 'renderCanvasComponents',\n    value: function renderCanvasComponents(components, props) {\n      var componentsToRender = components.filter(function (c) {\n        return c && !c.type.requiresSVG && c.type.isCanvas;\n      });\n\n      if (componentsToRender.length === 0) {\n        return null;\n      }\n\n      var _componentsToRender$ = componentsToRender[0].props,\n          marginLeft = _componentsToRender$.marginLeft,\n          marginTop = _componentsToRender$.marginTop,\n          marginBottom = _componentsToRender$.marginBottom,\n          marginRight = _componentsToRender$.marginRight,\n          innerHeight = _componentsToRender$.innerHeight,\n          innerWidth = _componentsToRender$.innerWidth;\n      return React.createElement(CanvasWrapper, {\n        innerHeight: innerHeight,\n        innerWidth: innerWidth,\n        marginLeft: marginLeft,\n        marginTop: marginTop,\n        marginBottom: marginBottom,\n        marginRight: marginRight\n      }, componentsToRender);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          className = _props.className,\n          dontCheckIfEmpty = _props.dontCheckIfEmpty,\n          style = _props.style,\n          width = _props.width,\n          height = _props.height;\n\n      if (!dontCheckIfEmpty && this._isPlotEmpty()) {\n        return React.createElement('div', {\n          className: 'rv-xy-plot ' + className,\n          style: _extends({\n            width: width + 'px',\n            height: height + 'px'\n          }, this.props.style)\n        });\n      }\n\n      var components = this._getClonedChildComponents();\n\n      return React.createElement('div', {\n        style: {\n          width: width + 'px',\n          height: height + 'px'\n        },\n        className: 'rv-xy-plot ' + className\n      }, React.createElement('svg', {\n        className: 'rv-xy-plot__inner',\n        width: width,\n        height: height,\n        style: style,\n        onClick: this._clickHandler,\n        onDoubleClick: this._doubleClickHandler,\n        onMouseDown: this._mouseDownHandler,\n        onMouseUp: this._mouseUpHandler,\n        onMouseMove: this._mouseMoveHandler,\n        onMouseLeave: this._mouseLeaveHandler,\n        onMouseEnter: this._mouseEnterHandler,\n        onTouchStart: this._mouseDownHandler,\n        onTouchMove: this._touchMoveHandler,\n        onTouchEnd: this._touchEndHandler,\n        onTouchCancel: this._touchCancelHandler,\n        onWheel: this._wheelHandler\n      }, components.filter(function (c) {\n        return c && c.type.requiresSVG;\n      })), this.renderCanvasComponents(components, this.props), components.filter(function (c) {\n        return c && !c.type.requiresSVG && !c.type.isCanvas;\n      }));\n    }\n  }]);\n\n  return XYPlot;\n}(React.Component);\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this._clickHandler = function (event) {\n    var onClick = _this3.props.onClick;\n\n    if (onClick) {\n      onClick(event);\n    }\n  };\n\n  this._doubleClickHandler = function (event) {\n    var onDoubleClick = _this3.props.onDoubleClick;\n\n    if (onDoubleClick) {\n      onDoubleClick(event);\n    }\n  };\n\n  this._mouseDownHandler = function (event) {\n    var _props2 = _this3.props,\n        onMouseDown = _props2.onMouseDown,\n        children = _props2.children;\n\n    if (onMouseDown) {\n      onMouseDown(event);\n    }\n\n    var seriesChildren = getSeriesChildren(children);\n    seriesChildren.forEach(function (child, index) {\n      var component = _this3['series' + index];\n\n      if (component && component.onParentMouseDown) {\n        component.onParentMouseDown(event);\n      }\n    });\n  };\n\n  this._mouseEnterHandler = function (event) {\n    var _props3 = _this3.props,\n        onMouseEnter = _props3.onMouseEnter,\n        children = _props3.children;\n\n    if (onMouseEnter) {\n      onMouseEnter(event);\n    }\n\n    var seriesChildren = getSeriesChildren(children);\n    seriesChildren.forEach(function (child, index) {\n      var component = _this3['series' + index];\n\n      if (component && component.onParentMouseEnter) {\n        component.onParentMouseEnter(event);\n      }\n    });\n  };\n\n  this._mouseLeaveHandler = function (event) {\n    var _props4 = _this3.props,\n        onMouseLeave = _props4.onMouseLeave,\n        children = _props4.children;\n\n    if (onMouseLeave) {\n      onMouseLeave(event);\n    }\n\n    var seriesChildren = getSeriesChildren(children);\n    seriesChildren.forEach(function (child, index) {\n      var component = _this3['series' + index];\n\n      if (component && component.onParentMouseLeave) {\n        component.onParentMouseLeave(event);\n      }\n    });\n  };\n\n  this._mouseMoveHandler = function (event) {\n    var _props5 = _this3.props,\n        onMouseMove = _props5.onMouseMove,\n        children = _props5.children;\n\n    if (onMouseMove) {\n      onMouseMove(event);\n    }\n\n    var seriesChildren = getSeriesChildren(children);\n    seriesChildren.forEach(function (child, index) {\n      var component = _this3['series' + index];\n\n      if (component && component.onParentMouseMove) {\n        component.onParentMouseMove(event);\n      }\n    });\n  };\n\n  this._mouseUpHandler = function (event) {\n    var _props6 = _this3.props,\n        onMouseUp = _props6.onMouseUp,\n        children = _props6.children;\n\n    if (onMouseUp) {\n      onMouseUp(event);\n    }\n\n    var seriesChildren = getSeriesChildren(children);\n    seriesChildren.forEach(function (child, index) {\n      var component = _this3['series' + index];\n\n      if (component && component.onParentMouseUp) {\n        component.onParentMouseUp(event);\n      }\n    });\n  };\n\n  this._touchCancelHandler = function (event) {\n    var onTouchCancel = _this3.props.onTouchCancel;\n\n    if (onTouchCancel) {\n      onTouchCancel(event);\n    }\n  };\n\n  this._touchEndHandler = function (event) {\n    var onTouchEnd = _this3.props.onTouchEnd;\n\n    if (onTouchEnd) {\n      onTouchEnd(event);\n    }\n  };\n\n  this._touchMoveHandler = function (event) {\n    var _props7 = _this3.props,\n        onTouchMove = _props7.onTouchMove,\n        children = _props7.children;\n\n    if (onTouchMove) {\n      onTouchMove(event);\n    }\n\n    var seriesChildren = getSeriesChildren(children);\n    seriesChildren.forEach(function (child, index) {\n      var component = _this3['series' + index];\n\n      if (component && component.onParentTouchMove) {\n        component.onParentTouchMove(event);\n      }\n    });\n  };\n\n  this._touchStartHandler = function (event) {\n    var _props8 = _this3.props,\n        onTouchStart = _props8.onTouchStart,\n        children = _props8.children;\n\n    if (onTouchStart) {\n      onTouchStart(event);\n    }\n\n    var seriesChildren = getSeriesChildren(children);\n    seriesChildren.forEach(function (child, index) {\n      var component = _this3['series' + index];\n\n      if (component && component.onParentTouchStart) {\n        component.onParentTouchStart(event);\n      }\n    });\n  };\n\n  this._wheelHandler = function (event) {\n    var onWheel = _this3.props.onWheel;\n\n    if (onWheel) {\n      onWheel(event);\n    }\n  };\n};\n\nXYPlot.displayName = 'XYPlot';\nexport default XYPlot;","map":{"version":3,"sources":["C:/Users/thero/OneDrive/Documents/factory-management/factory-management/factory-managment-frontend/node_modules/react-vis/es/plot/xy-plot.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_extends","assign","arguments","source","hasOwnProperty","call","_toConsumableArray","arr","Array","isArray","arr2","from","_defineProperty","obj","value","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","React","PropTypes","equal","extractScalePropsFromProps","getMissingScaleProps","getOptionalScaleProps","getXYPlotValues","getStackedData","getSeriesChildren","getSeriesPropsFromChildren","getInnerDimensions","MarginPropType","DEFAULT_MARGINS","AnimationPropType","CONTINUOUS_COLOR_RANGE","EXTENDED_DISCRETE_COLOR_RANGE","SIZE_RANGE","OPACITY_TYPE","CanvasWrapper","ATTRIBUTES","cleanseData","data","map","series","row","parent","checkIfMixinsAreEqual","nextScaleMixins","scaleMixins","hasTreeStructure","newMixins","_allData","oldMixins","XYPlot","_React$Component","get","className","animation","string","dontCheckIfEmpty","bool","height","number","isRequired","margin","onClick","func","onDoubleClick","onMouseDown","onMouseUp","onMouseEnter","onMouseLeave","onMouseMove","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onWheel","stackBy","oneOf","style","object","width","_this","getPrototypeOf","_initialiseProps","children","state","_getScaleMixins","componentWillReceiveProps","nextProps","nextData","setState","_getClonedChildComponents","_this2","_state","dimensions","Children","toArray","seriesProps","XYPlotValues","child","index","dataProps","seriesIndex","cloneElement","type","render","ref","_ref","_getDefaultScaleProps","_getInnerDimensions","innerWidth","innerHeight","colorRanges","reduce","acc","attr","range","xRange","yRange","opacityType","sizeRange","_ref2","filteredData","filter","d","allData","concat","apply","defaultScaleProps","optionalScaleProps","userScaleProps","missingScaleProps","zeroBaseProps","adjustBy","Set","adjustWhat","forEach","_child$type$getParent","getParentConfig","isDomainAdjustmentNeeded","zeroBaseValue","add","specifiedDomain","_adjustBy","_adjustWhat","_stackBy","_isPlotEmpty","some","renderCanvasComponents","components","componentsToRender","c","requiresSVG","isCanvas","_componentsToRender$","marginLeft","marginTop","marginBottom","marginRight","createElement","_props","_clickHandler","_doubleClickHandler","_mouseDownHandler","_mouseUpHandler","_mouseMoveHandler","_mouseLeaveHandler","_mouseEnterHandler","_touchMoveHandler","_touchEndHandler","_touchCancelHandler","_wheelHandler","Component","_this3","event","_props2","seriesChildren","component","onParentMouseDown","_props3","onParentMouseEnter","_props4","onParentMouseLeave","_props5","onParentMouseMove","_props6","onParentMouseUp","_props7","onParentTouchMove","_touchStartHandler","_props8","onParentTouchStart","displayName"],"mappings":"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","sourcesContent":["var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// Copyright (c) 2016 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport equal from 'deep-equal';\n\nimport { extractScalePropsFromProps, getMissingScaleProps, getOptionalScaleProps, getXYPlotValues } from '../utils/scales-utils';\nimport { getStackedData, getSeriesChildren, getSeriesPropsFromChildren } from '../utils/series-utils';\nimport { getInnerDimensions, MarginPropType, DEFAULT_MARGINS } from '../utils/chart-utils';\nimport { AnimationPropType } from '../animation';\nimport { CONTINUOUS_COLOR_RANGE, EXTENDED_DISCRETE_COLOR_RANGE, SIZE_RANGE, OPACITY_TYPE } from '../theme';\n\nimport CanvasWrapper from './series/canvas-wrapper';\n\nvar ATTRIBUTES = ['x', 'y', 'radius', 'angle', 'color', 'fill', 'stroke', 'opacity', 'size'];\n\n/**\n * Remove parents from tree formatted data. deep-equal doesnt play nice with data\n * that has circular structures, so we make every node single directional by pruning the parents.\n * @param {Array} data - the data object to have circular deps resolved in\n * @returns {Array} the sanitized data\n */\nfunction cleanseData(data) {\n  return data.map(function (series) {\n    if (!Array.isArray(series)) {\n      return series;\n    }\n    return series.map(function (row) {\n      return _extends({}, row, { parent: null });\n    });\n  });\n}\n\n/**\n * Wrapper on the deep-equal method for checking equality of next props vs current props\n * @param {Object} scaleMixins - Scale object.\n * @param {Object} nextScaleMixins - Scale object.\n * @param {Boolean} hasTreeStructure - Whether or not to cleanse the data of possible cyclic structures\n * @returns {Boolean} whether or not the two mixins objects are equal\n */\nfunction checkIfMixinsAreEqual(nextScaleMixins, scaleMixins, hasTreeStructure) {\n  var newMixins = _extends({}, nextScaleMixins, {\n    _allData: hasTreeStructure ? cleanseData(nextScaleMixins._allData) : nextScaleMixins._allData\n  });\n  var oldMixins = _extends({}, scaleMixins, {\n    _allData: hasTreeStructure ? cleanseData(scaleMixins._allData) : scaleMixins._allData\n  });\n  // it's hard to say if this function is reasonable?\n  return equal(newMixins, oldMixins);\n}\n\nvar XYPlot = function (_React$Component) {\n  _inherits(XYPlot, _React$Component);\n\n  _createClass(XYPlot, null, [{\n    key: 'defaultProps',\n    get: function get() {\n      return {\n        className: ''\n      };\n    }\n  }, {\n    key: 'propTypes',\n    get: function get() {\n      return {\n        animation: AnimationPropType,\n        className: PropTypes.string,\n        dontCheckIfEmpty: PropTypes.bool,\n        height: PropTypes.number.isRequired,\n        margin: MarginPropType,\n        onClick: PropTypes.func,\n        onDoubleClick: PropTypes.func,\n        onMouseDown: PropTypes.func,\n        onMouseUp: PropTypes.func,\n        onMouseEnter: PropTypes.func,\n        onMouseLeave: PropTypes.func,\n        onMouseMove: PropTypes.func,\n        onTouchStart: PropTypes.func,\n        onTouchMove: PropTypes.func,\n        onTouchEnd: PropTypes.func,\n        onTouchCancel: PropTypes.func,\n        onWheel: PropTypes.func,\n        stackBy: PropTypes.oneOf(ATTRIBUTES),\n        style: PropTypes.object,\n        width: PropTypes.number.isRequired\n      };\n    }\n  }]);\n\n  function XYPlot(props) {\n    _classCallCheck(this, XYPlot);\n\n    var _this = _possibleConstructorReturn(this, (XYPlot.__proto__ || Object.getPrototypeOf(XYPlot)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var stackBy = props.stackBy;\n\n    var children = getSeriesChildren(props.children);\n    var data = getStackedData(children, stackBy);\n    _this.state = {\n      scaleMixins: _this._getScaleMixins(data, props),\n      data: data\n    };\n    return _this;\n  }\n\n  _createClass(XYPlot, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var children = getSeriesChildren(nextProps.children);\n      var nextData = getStackedData(children, nextProps.stackBy);\n      var scaleMixins = this.state.scaleMixins;\n\n      var nextScaleMixins = this._getScaleMixins(nextData, nextProps);\n      if (!checkIfMixinsAreEqual(nextScaleMixins, scaleMixins, nextProps.hasTreeStructure)) {\n        this.setState({\n          scaleMixins: nextScaleMixins,\n          data: nextData\n        });\n      }\n    }\n\n    /**\n     * Trigger click related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Click event.\n     * @private\n     */\n\n\n    /**\n     * Trigger doule-click related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Double-click event.\n     * @private\n     */\n\n  }, {\n    key: '_getClonedChildComponents',\n\n\n    /**\n     * Prepare the child components (including series) for rendering.\n     * @returns {Array} Array of child components.\n     * @private\n     */\n    value: function _getClonedChildComponents() {\n      var _this2 = this;\n\n      var props = this.props;\n      var animation = this.props.animation;\n      var _state = this.state,\n          scaleMixins = _state.scaleMixins,\n          data = _state.data;\n\n      var dimensions = getInnerDimensions(this.props, DEFAULT_MARGINS);\n      var children = React.Children.toArray(this.props.children);\n      var seriesProps = getSeriesPropsFromChildren(children);\n      var XYPlotValues = getXYPlotValues(props, children);\n      return children.map(function (child, index) {\n        var dataProps = null;\n        if (seriesProps[index]) {\n          // Get the index of the series in the list of props and retrieve\n          // the data property from it.\n          var seriesIndex = seriesProps[index].seriesIndex;\n\n          dataProps = { data: data[seriesIndex] };\n        }\n        return React.cloneElement(child, _extends({}, dimensions, {\n          animation: animation\n        }, dataProps && child.type.prototype && child.type.prototype.render ? {\n          ref: function ref(_ref) {\n            return _this2['series' + seriesProps[index].seriesIndex] = _ref;\n          }\n        } : {}, seriesProps[index], scaleMixins, child.props, XYPlotValues[index], dataProps));\n      });\n    }\n    /**\n     * Get the list of scale-related settings that should be applied by default.\n     * @param {Object} props Object of props.\n     * @returns {Object} Defaults.\n     * @private\n     */\n\n  }, {\n    key: '_getDefaultScaleProps',\n    value: function _getDefaultScaleProps(props) {\n      var _getInnerDimensions = getInnerDimensions(props, DEFAULT_MARGINS),\n          innerWidth = _getInnerDimensions.innerWidth,\n          innerHeight = _getInnerDimensions.innerHeight;\n\n      var colorRanges = ['color', 'fill', 'stroke'].reduce(function (acc, attr) {\n        var range = props[attr + 'Type'] === 'category' ? EXTENDED_DISCRETE_COLOR_RANGE : CONTINUOUS_COLOR_RANGE;\n        return _extends({}, acc, _defineProperty({}, attr + 'Range', range));\n      }, {});\n\n      return _extends({\n        xRange: [0, innerWidth],\n        yRange: [innerHeight, 0]\n      }, colorRanges, {\n        opacityType: OPACITY_TYPE,\n        sizeRange: SIZE_RANGE\n      });\n    }\n\n    /**\n     * Get the map of scales from the props, apply defaults to them and then pass\n     * them further.\n     * @param {Object} data Array of all data.\n     * @param {Object} props Props of the component.\n     * @returns {Object} Map of scale-related props.\n     * @private\n     */\n\n  }, {\n    key: '_getScaleMixins',\n    value: function _getScaleMixins(data, props) {\n      var _ref2;\n\n      var filteredData = data.filter(function (d) {\n        return d;\n      });\n      var allData = (_ref2 = []).concat.apply(_ref2, _toConsumableArray(filteredData));\n\n      var defaultScaleProps = this._getDefaultScaleProps(props);\n      var optionalScaleProps = getOptionalScaleProps(props);\n      var userScaleProps = extractScalePropsFromProps(props, ATTRIBUTES);\n      var missingScaleProps = getMissingScaleProps(_extends({}, defaultScaleProps, optionalScaleProps, userScaleProps), allData, ATTRIBUTES);\n      var children = getSeriesChildren(props.children);\n      var zeroBaseProps = {};\n      var adjustBy = new Set();\n      var adjustWhat = new Set();\n      children.forEach(function (child, index) {\n        if (!child || !data[index]) {\n          return;\n        }\n        ATTRIBUTES.forEach(function (attr) {\n          var _child$type$getParent = child.type.getParentConfig(attr, child.props),\n              isDomainAdjustmentNeeded = _child$type$getParent.isDomainAdjustmentNeeded,\n              zeroBaseValue = _child$type$getParent.zeroBaseValue;\n\n          if (isDomainAdjustmentNeeded) {\n            adjustBy.add(attr);\n            adjustWhat.add(index);\n          }\n          if (zeroBaseValue) {\n            var specifiedDomain = props[attr + 'Domain'];\n            zeroBaseProps[attr + 'BaseValue'] = specifiedDomain ? specifiedDomain[0] : 0;\n          }\n        });\n      });\n      return _extends({}, defaultScaleProps, zeroBaseProps, userScaleProps, missingScaleProps, {\n        _allData: data,\n        _adjustBy: Array.from(adjustBy),\n        _adjustWhat: Array.from(adjustWhat),\n        _stackBy: props.stackBy\n      });\n    }\n\n    /**\n     * Checks if the plot is empty or not.\n     * Currently checks the data only.\n     * @returns {boolean} True for empty.\n     * @private\n     */\n\n  }, {\n    key: '_isPlotEmpty',\n    value: function _isPlotEmpty() {\n      var data = this.state.data;\n\n      return !data || !data.length || !data.some(function (series) {\n        return series && series.some(function (d) {\n          return d;\n        });\n      });\n    }\n\n    /**\n     * Trigger mouse-down related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Mouse down event.\n     * @private\n     */\n\n\n    /**\n     * Trigger onMouseEnter handler if it was passed in props.\n     * @param {React.SyntheticEvent} event Mouse enter event.\n     * @private\n     */\n\n\n    /**\n     * Trigger onMouseLeave handler if it was passed in props.\n     * @param {React.SyntheticEvent} event Mouse leave event.\n     * @private\n     */\n\n\n    /**\n     * Trigger movement-related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Mouse move event.\n     * @private\n     */\n\n\n    /**\n     * Trigger mouse-up related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Mouse up event.\n     * @private\n     */\n\n\n    /**\n     * Trigger onTouchCancel handler if it was passed in props.\n     * @param {React.SyntheticEvent} event Touch Cancel event.\n     * @private\n     */\n\n\n    /**\n     * Trigger onTouchEnd handler if it was passed in props.\n     * @param {React.SyntheticEvent} event Touch End event.\n     * @private\n     */\n\n\n    /**\n     * Trigger touch movement-related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Touch move event.\n     * @private\n     */\n\n\n    /**\n     * Trigger touch-start related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Touch start event.\n     * @private\n     */\n\n\n    /**\n     * Trigger doule-click related callbacks if they are available.\n     * @param {React.SyntheticEvent} event Double-click event.\n     * @private\n     */\n\n  }, {\n    key: 'renderCanvasComponents',\n    value: function renderCanvasComponents(components, props) {\n      var componentsToRender = components.filter(function (c) {\n        return c && !c.type.requiresSVG && c.type.isCanvas;\n      });\n\n      if (componentsToRender.length === 0) {\n        return null;\n      }\n      var _componentsToRender$ = componentsToRender[0].props,\n          marginLeft = _componentsToRender$.marginLeft,\n          marginTop = _componentsToRender$.marginTop,\n          marginBottom = _componentsToRender$.marginBottom,\n          marginRight = _componentsToRender$.marginRight,\n          innerHeight = _componentsToRender$.innerHeight,\n          innerWidth = _componentsToRender$.innerWidth;\n\n      return React.createElement(\n        CanvasWrapper,\n        {\n          innerHeight: innerHeight,\n          innerWidth: innerWidth,\n          marginLeft: marginLeft,\n          marginTop: marginTop,\n          marginBottom: marginBottom,\n          marginRight: marginRight\n        },\n        componentsToRender\n      );\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          className = _props.className,\n          dontCheckIfEmpty = _props.dontCheckIfEmpty,\n          style = _props.style,\n          width = _props.width,\n          height = _props.height;\n\n\n      if (!dontCheckIfEmpty && this._isPlotEmpty()) {\n        return React.createElement('div', {\n          className: 'rv-xy-plot ' + className,\n          style: _extends({\n            width: width + 'px',\n            height: height + 'px'\n          }, this.props.style)\n        });\n      }\n      var components = this._getClonedChildComponents();\n      return React.createElement(\n        'div',\n        {\n          style: {\n            width: width + 'px',\n            height: height + 'px'\n          },\n          className: 'rv-xy-plot ' + className\n        },\n        React.createElement(\n          'svg',\n          {\n            className: 'rv-xy-plot__inner',\n            width: width,\n            height: height,\n            style: style,\n            onClick: this._clickHandler,\n            onDoubleClick: this._doubleClickHandler,\n            onMouseDown: this._mouseDownHandler,\n            onMouseUp: this._mouseUpHandler,\n            onMouseMove: this._mouseMoveHandler,\n            onMouseLeave: this._mouseLeaveHandler,\n            onMouseEnter: this._mouseEnterHandler,\n            onTouchStart: this._mouseDownHandler,\n            onTouchMove: this._touchMoveHandler,\n            onTouchEnd: this._touchEndHandler,\n            onTouchCancel: this._touchCancelHandler,\n            onWheel: this._wheelHandler\n          },\n          components.filter(function (c) {\n            return c && c.type.requiresSVG;\n          })\n        ),\n        this.renderCanvasComponents(components, this.props),\n        components.filter(function (c) {\n          return c && !c.type.requiresSVG && !c.type.isCanvas;\n        })\n      );\n    }\n  }]);\n\n  return XYPlot;\n}(React.Component);\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this._clickHandler = function (event) {\n    var onClick = _this3.props.onClick;\n\n    if (onClick) {\n      onClick(event);\n    }\n  };\n\n  this._doubleClickHandler = function (event) {\n    var onDoubleClick = _this3.props.onDoubleClick;\n\n    if (onDoubleClick) {\n      onDoubleClick(event);\n    }\n  };\n\n  this._mouseDownHandler = function (event) {\n    var _props2 = _this3.props,\n        onMouseDown = _props2.onMouseDown,\n        children = _props2.children;\n\n    if (onMouseDown) {\n      onMouseDown(event);\n    }\n    var seriesChildren = getSeriesChildren(children);\n    seriesChildren.forEach(function (child, index) {\n      var component = _this3['series' + index];\n      if (component && component.onParentMouseDown) {\n        component.onParentMouseDown(event);\n      }\n    });\n  };\n\n  this._mouseEnterHandler = function (event) {\n    var _props3 = _this3.props,\n        onMouseEnter = _props3.onMouseEnter,\n        children = _props3.children;\n\n    if (onMouseEnter) {\n      onMouseEnter(event);\n    }\n    var seriesChildren = getSeriesChildren(children);\n    seriesChildren.forEach(function (child, index) {\n      var component = _this3['series' + index];\n      if (component && component.onParentMouseEnter) {\n        component.onParentMouseEnter(event);\n      }\n    });\n  };\n\n  this._mouseLeaveHandler = function (event) {\n    var _props4 = _this3.props,\n        onMouseLeave = _props4.onMouseLeave,\n        children = _props4.children;\n\n    if (onMouseLeave) {\n      onMouseLeave(event);\n    }\n    var seriesChildren = getSeriesChildren(children);\n    seriesChildren.forEach(function (child, index) {\n      var component = _this3['series' + index];\n      if (component && component.onParentMouseLeave) {\n        component.onParentMouseLeave(event);\n      }\n    });\n  };\n\n  this._mouseMoveHandler = function (event) {\n    var _props5 = _this3.props,\n        onMouseMove = _props5.onMouseMove,\n        children = _props5.children;\n\n    if (onMouseMove) {\n      onMouseMove(event);\n    }\n    var seriesChildren = getSeriesChildren(children);\n    seriesChildren.forEach(function (child, index) {\n      var component = _this3['series' + index];\n      if (component && component.onParentMouseMove) {\n        component.onParentMouseMove(event);\n      }\n    });\n  };\n\n  this._mouseUpHandler = function (event) {\n    var _props6 = _this3.props,\n        onMouseUp = _props6.onMouseUp,\n        children = _props6.children;\n\n    if (onMouseUp) {\n      onMouseUp(event);\n    }\n    var seriesChildren = getSeriesChildren(children);\n    seriesChildren.forEach(function (child, index) {\n      var component = _this3['series' + index];\n      if (component && component.onParentMouseUp) {\n        component.onParentMouseUp(event);\n      }\n    });\n  };\n\n  this._touchCancelHandler = function (event) {\n    var onTouchCancel = _this3.props.onTouchCancel;\n\n    if (onTouchCancel) {\n      onTouchCancel(event);\n    }\n  };\n\n  this._touchEndHandler = function (event) {\n    var onTouchEnd = _this3.props.onTouchEnd;\n\n    if (onTouchEnd) {\n      onTouchEnd(event);\n    }\n  };\n\n  this._touchMoveHandler = function (event) {\n    var _props7 = _this3.props,\n        onTouchMove = _props7.onTouchMove,\n        children = _props7.children;\n\n    if (onTouchMove) {\n      onTouchMove(event);\n    }\n    var seriesChildren = getSeriesChildren(children);\n    seriesChildren.forEach(function (child, index) {\n      var component = _this3['series' + index];\n      if (component && component.onParentTouchMove) {\n        component.onParentTouchMove(event);\n      }\n    });\n  };\n\n  this._touchStartHandler = function (event) {\n    var _props8 = _this3.props,\n        onTouchStart = _props8.onTouchStart,\n        children = _props8.children;\n\n    if (onTouchStart) {\n      onTouchStart(event);\n    }\n    var seriesChildren = getSeriesChildren(children);\n    seriesChildren.forEach(function (child, index) {\n      var component = _this3['series' + index];\n      if (component && component.onParentTouchStart) {\n        component.onParentTouchStart(event);\n      }\n    });\n  };\n\n  this._wheelHandler = function (event) {\n    var onWheel = _this3.props.onWheel;\n\n    if (onWheel) {\n      onWheel(event);\n    }\n  };\n};\n\nXYPlot.displayName = 'XYPlot';\n\nexport default XYPlot;"]},"metadata":{},"sourceType":"module"}