{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n}; // Copyright (c) 2016 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { hierarchy, partition } from 'd3-hierarchy';\nimport { scaleLinear, scaleSqrt } from 'd3-scale';\nimport { AnimationPropType } from '../animation';\nimport LabelSeries from '../plot/series/label-series';\nimport ArcSeries from '../plot/series/arc-series';\nimport XYPlot from '../plot/xy-plot';\nimport { getRadialDomain } from '../utils/series-utils';\nimport { getRadialLayoutMargin } from '../utils/chart-utils';\nvar predefinedClassName = 'rv-sunburst';\nvar LISTENERS_TO_OVERWRITE = ['onValueMouseOver', 'onValueMouseOut', 'onValueClick', 'onValueRightClick', 'onSeriesMouseOver', 'onSeriesMouseOut', 'onSeriesClick', 'onSeriesRightClick'];\n/**\r\n * Create the list of nodes to render.\r\n * @param {Object} props\r\n   props.data {Object} - tree structured data (each node has a name anc an array of children)\r\n   props.height {number} - the height of the graphic to be rendered\r\n   props.hideRootNode {boolean} - whether or not to hide the root node\r\n   props.width {number} - the width of the graphic to be rendered\r\n   props.getSize {function} - accessor for the size\r\n * @returns {Array} Array of nodes.\r\n */\n\nfunction getNodesToRender(_ref) {\n  var data = _ref.data,\n      height = _ref.height,\n      hideRootNode = _ref.hideRootNode,\n      width = _ref.width,\n      getSize = _ref.getSize;\n  var partitionFunction = partition();\n  var structuredInput = hierarchy(data).sum(getSize);\n  var radius = Math.min(width, height) / 2 - 10;\n  var x = scaleLinear().range([0, 2 * Math.PI]);\n  var y = scaleSqrt().range([0, radius]);\n  return partitionFunction(structuredInput).descendants().reduce(function (res, cell, index) {\n    if (hideRootNode && index === 0) {\n      return res;\n    }\n\n    return res.concat([_extends({\n      angle0: Math.max(0, Math.min(2 * Math.PI, x(cell.x0))),\n      angle: Math.max(0, Math.min(2 * Math.PI, x(cell.x1))),\n      radius0: Math.max(0, y(cell.y0)),\n      radius: Math.max(0, y(cell.y1)),\n      depth: cell.depth,\n      parent: cell.parent\n    }, cell.data)]);\n  }, []);\n}\n/**\r\n * Convert arc nodes into label rows.\r\n * Important to use mappedData rather than regular data, bc it is already unrolled\r\n * @param {Array} mappedData - Array of nodes.\r\n * @param {Object} accessors - object of accessors\r\n * @returns {Array} array of node for rendering as labels\r\n */\n\n\nfunction buildLabels(mappedData, accessors) {\n  var getAngle = accessors.getAngle,\n      getAngle0 = accessors.getAngle0,\n      getLabel = accessors.getLabel,\n      getRadius0 = accessors.getRadius0;\n  return mappedData.filter(getLabel).map(function (row) {\n    var truedAngle = -1 * getAngle(row) + Math.PI / 2;\n    var truedAngle0 = -1 * getAngle0(row) + Math.PI / 2;\n    var angle = (truedAngle0 + truedAngle) / 2;\n    var rotateLabels = !row.dontRotateLabel;\n    var rotAngle = -angle / (2 * Math.PI) * 360;\n    return _extends({}, row, {\n      children: null,\n      angle: null,\n      radius: null,\n      x: getRadius0(row) * Math.cos(angle),\n      y: getRadius0(row) * Math.sin(angle),\n      style: _extends({\n        textAnchor: rotAngle > 90 ? 'end' : 'start'\n      }, row.labelStyle),\n      rotation: rotateLabels ? rotAngle > 90 ? rotAngle + 180 : rotAngle === 90 ? 90 : rotAngle : null\n    });\n  });\n}\n\nvar NOOP = function NOOP() {};\n\nfunction Sunburst(props) {\n  var getAngle = props.getAngle,\n      getAngle0 = props.getAngle0,\n      animation = props.animation,\n      className = props.className,\n      children = props.children,\n      data = props.data,\n      height = props.height,\n      hideRootNode = props.hideRootNode,\n      getLabel = props.getLabel,\n      width = props.width,\n      getSize = props.getSize,\n      colorType = props.colorType;\n  var mappedData = getNodesToRender({\n    data: data,\n    height: height,\n    hideRootNode: hideRootNode,\n    width: width,\n    getSize: getSize\n  });\n  var radialDomain = getRadialDomain(mappedData);\n  var margin = getRadialLayoutMargin(width, height, radialDomain);\n  var labelData = buildLabels(mappedData, {\n    getAngle: getAngle,\n    getAngle0: getAngle0,\n    getLabel: getLabel,\n    getRadius0: function getRadius0(d) {\n      return d.radius0;\n    }\n  });\n\n  var hofBuilder = function hofBuilder(f) {\n    return function (e, i) {\n      return f ? f(mappedData[e.index], i) : NOOP;\n    };\n  };\n\n  return React.createElement(XYPlot, {\n    height: height,\n    hasTreeStructure: true,\n    width: width,\n    className: predefinedClassName + ' ' + className,\n    margin: margin,\n    xDomain: [-radialDomain, radialDomain],\n    yDomain: [-radialDomain, radialDomain]\n  }, React.createElement(ArcSeries, _extends({\n    colorType: colorType\n  }, props, {\n    animation: animation,\n    radiusDomain: [0, radialDomain],\n    // need to present a stripped down version for interpolation\n    data: animation ? mappedData.map(function (row, index) {\n      return _extends({}, row, {\n        parent: null,\n        children: null,\n        index: index\n      });\n    }) : mappedData,\n    _data: animation ? mappedData : null,\n    arcClassName: predefinedClassName + '__series--radial__arc'\n  }, LISTENERS_TO_OVERWRITE.reduce(function (acc, propName) {\n    var prop = props[propName];\n    acc[propName] = animation ? hofBuilder(prop) : prop;\n    return acc;\n  }, {}))), labelData.length > 0 && React.createElement(LabelSeries, {\n    data: labelData,\n    getLabel: getLabel\n  }), children);\n}\n\nSunburst.displayName = 'Sunburst';\nSunburst.propTypes = {\n  animation: AnimationPropType,\n  getAngle: PropTypes.func,\n  getAngle0: PropTypes.func,\n  className: PropTypes.string,\n  colorType: PropTypes.string,\n  data: PropTypes.object.isRequired,\n  height: PropTypes.number.isRequired,\n  hideRootNode: PropTypes.bool,\n  getLabel: PropTypes.func,\n  onValueClick: PropTypes.func,\n  onValueMouseOver: PropTypes.func,\n  onValueMouseOut: PropTypes.func,\n  getSize: PropTypes.func,\n  width: PropTypes.number.isRequired,\n  padAngle: PropTypes.oneOfType([PropTypes.func, PropTypes.number])\n};\nSunburst.defaultProps = {\n  getAngle: function getAngle(d) {\n    return d.angle;\n  },\n  getAngle0: function getAngle0(d) {\n    return d.angle0;\n  },\n  className: '',\n  colorType: 'literal',\n  getColor: function getColor(d) {\n    return d.color;\n  },\n  hideRootNode: false,\n  getLabel: function getLabel(d) {\n    return d.label;\n  },\n  getSize: function getSize(d) {\n    return d.size;\n  },\n  padAngle: 0\n};\nexport default Sunburst;","map":{"version":3,"sources":["C:/Users/thero/OneDrive/Documents/factory-management/factory-management/factory-managment-frontend/node_modules/react-vis/es/sunburst/index.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","React","PropTypes","hierarchy","partition","scaleLinear","scaleSqrt","AnimationPropType","LabelSeries","ArcSeries","XYPlot","getRadialDomain","getRadialLayoutMargin","predefinedClassName","LISTENERS_TO_OVERWRITE","getNodesToRender","_ref","data","height","hideRootNode","width","getSize","partitionFunction","structuredInput","sum","radius","Math","min","x","range","PI","y","descendants","reduce","res","cell","index","concat","angle0","max","x0","angle","x1","radius0","y0","y1","depth","parent","buildLabels","mappedData","accessors","getAngle","getAngle0","getLabel","getRadius0","filter","map","row","truedAngle","truedAngle0","rotateLabels","dontRotateLabel","rotAngle","children","cos","sin","style","textAnchor","labelStyle","rotation","NOOP","Sunburst","props","animation","className","colorType","radialDomain","margin","labelData","d","hofBuilder","f","e","createElement","hasTreeStructure","xDomain","yDomain","radiusDomain","_data","arcClassName","acc","propName","prop","displayName","propTypes","func","string","object","isRequired","number","bool","onValueClick","onValueMouseOver","onValueMouseOut","padAngle","oneOfType","defaultProps","getColor","color","label","size"],"mappings":"AAAA,IAAIA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,SAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,UAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,QAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,SAAOL,MAAP;AAAgB,CAAhQ,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,OAAOS,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,SAAT,EAAoBC,SAApB,QAAqC,cAArC;AAEA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,UAAvC;AAEA,SAASC,iBAAT,QAAkC,cAAlC;AACA,OAAOC,WAAP,MAAwB,6BAAxB;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,SAASC,eAAT,QAAgC,uBAAhC;AACA,SAASC,qBAAT,QAAsC,sBAAtC;AAEA,IAAIC,mBAAmB,GAAG,aAA1B;AAEA,IAAIC,sBAAsB,GAAG,CAAC,kBAAD,EAAqB,iBAArB,EAAwC,cAAxC,EAAwD,mBAAxD,EAA6E,mBAA7E,EAAkG,kBAAlG,EAAsH,eAAtH,EAAuI,oBAAvI,CAA7B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,gBAAT,CAA0BC,IAA1B,EAAgC;AAC9B,MAAIC,IAAI,GAAGD,IAAI,CAACC,IAAhB;AAAA,MACIC,MAAM,GAAGF,IAAI,CAACE,MADlB;AAAA,MAEIC,YAAY,GAAGH,IAAI,CAACG,YAFxB;AAAA,MAGIC,KAAK,GAAGJ,IAAI,CAACI,KAHjB;AAAA,MAIIC,OAAO,GAAGL,IAAI,CAACK,OAJnB;AAMA,MAAIC,iBAAiB,GAAGlB,SAAS,EAAjC;AACA,MAAImB,eAAe,GAAGpB,SAAS,CAACc,IAAD,CAAT,CAAgBO,GAAhB,CAAoBH,OAApB,CAAtB;AACA,MAAII,MAAM,GAAGC,IAAI,CAACC,GAAL,CAASP,KAAT,EAAgBF,MAAhB,IAA0B,CAA1B,GAA8B,EAA3C;AACA,MAAIU,CAAC,GAAGvB,WAAW,GAAGwB,KAAd,CAAoB,CAAC,CAAD,EAAI,IAAIH,IAAI,CAACI,EAAb,CAApB,CAAR;AACA,MAAIC,CAAC,GAAGzB,SAAS,GAAGuB,KAAZ,CAAkB,CAAC,CAAD,EAAIJ,MAAJ,CAAlB,CAAR;AAEA,SAAOH,iBAAiB,CAACC,eAAD,CAAjB,CAAmCS,WAAnC,GAAiDC,MAAjD,CAAwD,UAAUC,GAAV,EAAeC,IAAf,EAAqBC,KAArB,EAA4B;AACzF,QAAIjB,YAAY,IAAIiB,KAAK,KAAK,CAA9B,EAAiC;AAC/B,aAAOF,GAAP;AACD;;AAED,WAAOA,GAAG,CAACG,MAAJ,CAAW,CAAChD,QAAQ,CAAC;AAC1BiD,MAAAA,MAAM,EAAEZ,IAAI,CAACa,GAAL,CAAS,CAAT,EAAYb,IAAI,CAACC,GAAL,CAAS,IAAID,IAAI,CAACI,EAAlB,EAAsBF,CAAC,CAACO,IAAI,CAACK,EAAN,CAAvB,CAAZ,CADkB;AAE1BC,MAAAA,KAAK,EAAEf,IAAI,CAACa,GAAL,CAAS,CAAT,EAAYb,IAAI,CAACC,GAAL,CAAS,IAAID,IAAI,CAACI,EAAlB,EAAsBF,CAAC,CAACO,IAAI,CAACO,EAAN,CAAvB,CAAZ,CAFmB;AAG1BC,MAAAA,OAAO,EAAEjB,IAAI,CAACa,GAAL,CAAS,CAAT,EAAYR,CAAC,CAACI,IAAI,CAACS,EAAN,CAAb,CAHiB;AAI1BnB,MAAAA,MAAM,EAAEC,IAAI,CAACa,GAAL,CAAS,CAAT,EAAYR,CAAC,CAACI,IAAI,CAACU,EAAN,CAAb,CAJkB;AAK1BC,MAAAA,KAAK,EAAEX,IAAI,CAACW,KALc;AAM1BC,MAAAA,MAAM,EAAEZ,IAAI,CAACY;AANa,KAAD,EAOxBZ,IAAI,CAAClB,IAPmB,CAAT,CAAX,CAAP;AAQD,GAbM,EAaJ,EAbI,CAAP;AAcD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS+B,WAAT,CAAqBC,UAArB,EAAiCC,SAAjC,EAA4C;AAC1C,MAAIC,QAAQ,GAAGD,SAAS,CAACC,QAAzB;AAAA,MACIC,SAAS,GAAGF,SAAS,CAACE,SAD1B;AAAA,MAEIC,QAAQ,GAAGH,SAAS,CAACG,QAFzB;AAAA,MAGIC,UAAU,GAAGJ,SAAS,CAACI,UAH3B;AAMA,SAAOL,UAAU,CAACM,MAAX,CAAkBF,QAAlB,EAA4BG,GAA5B,CAAgC,UAAUC,GAAV,EAAe;AACpD,QAAIC,UAAU,GAAG,CAAC,CAAD,GAAKP,QAAQ,CAACM,GAAD,CAAb,GAAqB/B,IAAI,CAACI,EAAL,GAAU,CAAhD;AACA,QAAI6B,WAAW,GAAG,CAAC,CAAD,GAAKP,SAAS,CAACK,GAAD,CAAd,GAAsB/B,IAAI,CAACI,EAAL,GAAU,CAAlD;AACA,QAAIW,KAAK,GAAG,CAACkB,WAAW,GAAGD,UAAf,IAA6B,CAAzC;AACA,QAAIE,YAAY,GAAG,CAACH,GAAG,CAACI,eAAxB;AACA,QAAIC,QAAQ,GAAG,CAACrB,KAAD,IAAU,IAAIf,IAAI,CAACI,EAAnB,IAAyB,GAAxC;AAEA,WAAOzC,QAAQ,CAAC,EAAD,EAAKoE,GAAL,EAAU;AACvBM,MAAAA,QAAQ,EAAE,IADa;AAEvBtB,MAAAA,KAAK,EAAE,IAFgB;AAGvBhB,MAAAA,MAAM,EAAE,IAHe;AAIvBG,MAAAA,CAAC,EAAE0B,UAAU,CAACG,GAAD,CAAV,GAAkB/B,IAAI,CAACsC,GAAL,CAASvB,KAAT,CAJE;AAKvBV,MAAAA,CAAC,EAAEuB,UAAU,CAACG,GAAD,CAAV,GAAkB/B,IAAI,CAACuC,GAAL,CAASxB,KAAT,CALE;AAMvByB,MAAAA,KAAK,EAAE7E,QAAQ,CAAC;AACd8E,QAAAA,UAAU,EAAEL,QAAQ,GAAG,EAAX,GAAgB,KAAhB,GAAwB;AADtB,OAAD,EAEZL,GAAG,CAACW,UAFQ,CANQ;AASvBC,MAAAA,QAAQ,EAAET,YAAY,GAAGE,QAAQ,GAAG,EAAX,GAAgBA,QAAQ,GAAG,GAA3B,GAAiCA,QAAQ,KAAK,EAAb,GAAkB,EAAlB,GAAuBA,QAA3D,GAAsE;AATrE,KAAV,CAAf;AAWD,GAlBM,CAAP;AAmBD;;AAED,IAAIQ,IAAI,GAAG,SAASA,IAAT,GAAgB,CAAE,CAA7B;;AAEA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AACvB,MAAIrB,QAAQ,GAAGqB,KAAK,CAACrB,QAArB;AAAA,MACIC,SAAS,GAAGoB,KAAK,CAACpB,SADtB;AAAA,MAEIqB,SAAS,GAAGD,KAAK,CAACC,SAFtB;AAAA,MAGIC,SAAS,GAAGF,KAAK,CAACE,SAHtB;AAAA,MAIIX,QAAQ,GAAGS,KAAK,CAACT,QAJrB;AAAA,MAKI9C,IAAI,GAAGuD,KAAK,CAACvD,IALjB;AAAA,MAMIC,MAAM,GAAGsD,KAAK,CAACtD,MANnB;AAAA,MAOIC,YAAY,GAAGqD,KAAK,CAACrD,YAPzB;AAAA,MAQIkC,QAAQ,GAAGmB,KAAK,CAACnB,QARrB;AAAA,MASIjC,KAAK,GAAGoD,KAAK,CAACpD,KATlB;AAAA,MAUIC,OAAO,GAAGmD,KAAK,CAACnD,OAVpB;AAAA,MAWIsD,SAAS,GAAGH,KAAK,CAACG,SAXtB;AAaA,MAAI1B,UAAU,GAAGlC,gBAAgB,CAAC;AAChCE,IAAAA,IAAI,EAAEA,IAD0B;AAEhCC,IAAAA,MAAM,EAAEA,MAFwB;AAGhCC,IAAAA,YAAY,EAAEA,YAHkB;AAIhCC,IAAAA,KAAK,EAAEA,KAJyB;AAKhCC,IAAAA,OAAO,EAAEA;AALuB,GAAD,CAAjC;AAOA,MAAIuD,YAAY,GAAGjE,eAAe,CAACsC,UAAD,CAAlC;AACA,MAAI4B,MAAM,GAAGjE,qBAAqB,CAACQ,KAAD,EAAQF,MAAR,EAAgB0D,YAAhB,CAAlC;AAEA,MAAIE,SAAS,GAAG9B,WAAW,CAACC,UAAD,EAAa;AACtCE,IAAAA,QAAQ,EAAEA,QAD4B;AAEtCC,IAAAA,SAAS,EAAEA,SAF2B;AAGtCC,IAAAA,QAAQ,EAAEA,QAH4B;AAItCC,IAAAA,UAAU,EAAE,SAASA,UAAT,CAAoByB,CAApB,EAAuB;AACjC,aAAOA,CAAC,CAACpC,OAAT;AACD;AANqC,GAAb,CAA3B;;AASA,MAAIqC,UAAU,GAAG,SAASA,UAAT,CAAoBC,CAApB,EAAuB;AACtC,WAAO,UAAUC,CAAV,EAAazF,CAAb,EAAgB;AACrB,aAAOwF,CAAC,GAAGA,CAAC,CAAChC,UAAU,CAACiC,CAAC,CAAC9C,KAAH,CAAX,EAAsB3C,CAAtB,CAAJ,GAA+B6E,IAAvC;AACD,KAFD;AAGD,GAJD;;AAKA,SAAOrE,KAAK,CAACkF,aAAN,CACLzE,MADK,EAEL;AACEQ,IAAAA,MAAM,EAAEA,MADV;AAEEkE,IAAAA,gBAAgB,EAAE,IAFpB;AAGEhE,IAAAA,KAAK,EAAEA,KAHT;AAIEsD,IAAAA,SAAS,EAAE7D,mBAAmB,GAAG,GAAtB,GAA4B6D,SAJzC;AAKEG,IAAAA,MAAM,EAAEA,MALV;AAMEQ,IAAAA,OAAO,EAAE,CAAC,CAACT,YAAF,EAAgBA,YAAhB,CANX;AAOEU,IAAAA,OAAO,EAAE,CAAC,CAACV,YAAF,EAAgBA,YAAhB;AAPX,GAFK,EAWL3E,KAAK,CAACkF,aAAN,CAAoB1E,SAApB,EAA+BpB,QAAQ,CAAC;AACtCsF,IAAAA,SAAS,EAAEA;AAD2B,GAAD,EAEpCH,KAFoC,EAE7B;AACRC,IAAAA,SAAS,EAAEA,SADH;AAERc,IAAAA,YAAY,EAAE,CAAC,CAAD,EAAIX,YAAJ,CAFN;AAGR;AACA3D,IAAAA,IAAI,EAAEwD,SAAS,GAAGxB,UAAU,CAACO,GAAX,CAAe,UAAUC,GAAV,EAAerB,KAAf,EAAsB;AACrD,aAAO/C,QAAQ,CAAC,EAAD,EAAKoE,GAAL,EAAU;AACvBV,QAAAA,MAAM,EAAE,IADe;AAEvBgB,QAAAA,QAAQ,EAAE,IAFa;AAGvB3B,QAAAA,KAAK,EAAEA;AAHgB,OAAV,CAAf;AAKD,KANiB,CAAH,GAMVa,UAVG;AAWRuC,IAAAA,KAAK,EAAEf,SAAS,GAAGxB,UAAH,GAAgB,IAXxB;AAYRwC,IAAAA,YAAY,EAAE5E,mBAAmB,GAAG;AAZ5B,GAF6B,EAepCC,sBAAsB,CAACmB,MAAvB,CAA8B,UAAUyD,GAAV,EAAeC,QAAf,EAAyB;AACxD,QAAIC,IAAI,GAAGpB,KAAK,CAACmB,QAAD,CAAhB;AACAD,IAAAA,GAAG,CAACC,QAAD,CAAH,GAAgBlB,SAAS,GAAGO,UAAU,CAACY,IAAD,CAAb,GAAsBA,IAA/C;AACA,WAAOF,GAAP;AACD,GAJE,EAIA,EAJA,CAfoC,CAAvC,CAXK,EA+BLZ,SAAS,CAACnF,MAAV,GAAmB,CAAnB,IAAwBM,KAAK,CAACkF,aAAN,CAAoB3E,WAApB,EAAiC;AAAES,IAAAA,IAAI,EAAE6D,SAAR;AAAmBzB,IAAAA,QAAQ,EAAEA;AAA7B,GAAjC,CA/BnB,EAgCLU,QAhCK,CAAP;AAkCD;;AAEDQ,QAAQ,CAACsB,WAAT,GAAuB,UAAvB;AACAtB,QAAQ,CAACuB,SAAT,GAAqB;AACnBrB,EAAAA,SAAS,EAAElE,iBADQ;AAEnB4C,EAAAA,QAAQ,EAAEjD,SAAS,CAAC6F,IAFD;AAGnB3C,EAAAA,SAAS,EAAElD,SAAS,CAAC6F,IAHF;AAInBrB,EAAAA,SAAS,EAAExE,SAAS,CAAC8F,MAJF;AAKnBrB,EAAAA,SAAS,EAAEzE,SAAS,CAAC8F,MALF;AAMnB/E,EAAAA,IAAI,EAAEf,SAAS,CAAC+F,MAAV,CAAiBC,UANJ;AAOnBhF,EAAAA,MAAM,EAAEhB,SAAS,CAACiG,MAAV,CAAiBD,UAPN;AAQnB/E,EAAAA,YAAY,EAAEjB,SAAS,CAACkG,IARL;AASnB/C,EAAAA,QAAQ,EAAEnD,SAAS,CAAC6F,IATD;AAUnBM,EAAAA,YAAY,EAAEnG,SAAS,CAAC6F,IAVL;AAWnBO,EAAAA,gBAAgB,EAAEpG,SAAS,CAAC6F,IAXT;AAYnBQ,EAAAA,eAAe,EAAErG,SAAS,CAAC6F,IAZR;AAanB1E,EAAAA,OAAO,EAAEnB,SAAS,CAAC6F,IAbA;AAcnB3E,EAAAA,KAAK,EAAElB,SAAS,CAACiG,MAAV,CAAiBD,UAdL;AAenBM,EAAAA,QAAQ,EAAEtG,SAAS,CAACuG,SAAV,CAAoB,CAACvG,SAAS,CAAC6F,IAAX,EAAiB7F,SAAS,CAACiG,MAA3B,CAApB;AAfS,CAArB;AAiBA5B,QAAQ,CAACmC,YAAT,GAAwB;AACtBvD,EAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkB4B,CAAlB,EAAqB;AAC7B,WAAOA,CAAC,CAACtC,KAAT;AACD,GAHqB;AAItBW,EAAAA,SAAS,EAAE,SAASA,SAAT,CAAmB2B,CAAnB,EAAsB;AAC/B,WAAOA,CAAC,CAACzC,MAAT;AACD,GANqB;AAOtBoC,EAAAA,SAAS,EAAE,EAPW;AAQtBC,EAAAA,SAAS,EAAE,SARW;AAStBgC,EAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkB5B,CAAlB,EAAqB;AAC7B,WAAOA,CAAC,CAAC6B,KAAT;AACD,GAXqB;AAYtBzF,EAAAA,YAAY,EAAE,KAZQ;AAatBkC,EAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkB0B,CAAlB,EAAqB;AAC7B,WAAOA,CAAC,CAAC8B,KAAT;AACD,GAfqB;AAgBtBxF,EAAAA,OAAO,EAAE,SAASA,OAAT,CAAiB0D,CAAjB,EAAoB;AAC3B,WAAOA,CAAC,CAAC+B,IAAT;AACD,GAlBqB;AAmBtBN,EAAAA,QAAQ,EAAE;AAnBY,CAAxB;AAsBA,eAAejC,QAAf","sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\r\n\r\n// Copyright (c) 2016 - 2017 Uber Technologies, Inc.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE.\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { hierarchy, partition } from 'd3-hierarchy';\r\n\r\nimport { scaleLinear, scaleSqrt } from 'd3-scale';\r\n\r\nimport { AnimationPropType } from '../animation';\r\nimport LabelSeries from '../plot/series/label-series';\r\nimport ArcSeries from '../plot/series/arc-series';\r\nimport XYPlot from '../plot/xy-plot';\r\nimport { getRadialDomain } from '../utils/series-utils';\r\nimport { getRadialLayoutMargin } from '../utils/chart-utils';\r\n\r\nvar predefinedClassName = 'rv-sunburst';\r\n\r\nvar LISTENERS_TO_OVERWRITE = ['onValueMouseOver', 'onValueMouseOut', 'onValueClick', 'onValueRightClick', 'onSeriesMouseOver', 'onSeriesMouseOut', 'onSeriesClick', 'onSeriesRightClick'];\r\n\r\n/**\r\n * Create the list of nodes to render.\r\n * @param {Object} props\r\n   props.data {Object} - tree structured data (each node has a name anc an array of children)\r\n   props.height {number} - the height of the graphic to be rendered\r\n   props.hideRootNode {boolean} - whether or not to hide the root node\r\n   props.width {number} - the width of the graphic to be rendered\r\n   props.getSize {function} - accessor for the size\r\n * @returns {Array} Array of nodes.\r\n */\r\nfunction getNodesToRender(_ref) {\r\n  var data = _ref.data,\r\n      height = _ref.height,\r\n      hideRootNode = _ref.hideRootNode,\r\n      width = _ref.width,\r\n      getSize = _ref.getSize;\r\n\r\n  var partitionFunction = partition();\r\n  var structuredInput = hierarchy(data).sum(getSize);\r\n  var radius = Math.min(width, height) / 2 - 10;\r\n  var x = scaleLinear().range([0, 2 * Math.PI]);\r\n  var y = scaleSqrt().range([0, radius]);\r\n\r\n  return partitionFunction(structuredInput).descendants().reduce(function (res, cell, index) {\r\n    if (hideRootNode && index === 0) {\r\n      return res;\r\n    }\r\n\r\n    return res.concat([_extends({\r\n      angle0: Math.max(0, Math.min(2 * Math.PI, x(cell.x0))),\r\n      angle: Math.max(0, Math.min(2 * Math.PI, x(cell.x1))),\r\n      radius0: Math.max(0, y(cell.y0)),\r\n      radius: Math.max(0, y(cell.y1)),\r\n      depth: cell.depth,\r\n      parent: cell.parent\r\n    }, cell.data)]);\r\n  }, []);\r\n}\r\n\r\n/**\r\n * Convert arc nodes into label rows.\r\n * Important to use mappedData rather than regular data, bc it is already unrolled\r\n * @param {Array} mappedData - Array of nodes.\r\n * @param {Object} accessors - object of accessors\r\n * @returns {Array} array of node for rendering as labels\r\n */\r\nfunction buildLabels(mappedData, accessors) {\r\n  var getAngle = accessors.getAngle,\r\n      getAngle0 = accessors.getAngle0,\r\n      getLabel = accessors.getLabel,\r\n      getRadius0 = accessors.getRadius0;\r\n\r\n\r\n  return mappedData.filter(getLabel).map(function (row) {\r\n    var truedAngle = -1 * getAngle(row) + Math.PI / 2;\r\n    var truedAngle0 = -1 * getAngle0(row) + Math.PI / 2;\r\n    var angle = (truedAngle0 + truedAngle) / 2;\r\n    var rotateLabels = !row.dontRotateLabel;\r\n    var rotAngle = -angle / (2 * Math.PI) * 360;\r\n\r\n    return _extends({}, row, {\r\n      children: null,\r\n      angle: null,\r\n      radius: null,\r\n      x: getRadius0(row) * Math.cos(angle),\r\n      y: getRadius0(row) * Math.sin(angle),\r\n      style: _extends({\r\n        textAnchor: rotAngle > 90 ? 'end' : 'start'\r\n      }, row.labelStyle),\r\n      rotation: rotateLabels ? rotAngle > 90 ? rotAngle + 180 : rotAngle === 90 ? 90 : rotAngle : null\r\n    });\r\n  });\r\n}\r\n\r\nvar NOOP = function NOOP() {};\r\n\r\nfunction Sunburst(props) {\r\n  var getAngle = props.getAngle,\r\n      getAngle0 = props.getAngle0,\r\n      animation = props.animation,\r\n      className = props.className,\r\n      children = props.children,\r\n      data = props.data,\r\n      height = props.height,\r\n      hideRootNode = props.hideRootNode,\r\n      getLabel = props.getLabel,\r\n      width = props.width,\r\n      getSize = props.getSize,\r\n      colorType = props.colorType;\r\n\r\n  var mappedData = getNodesToRender({\r\n    data: data,\r\n    height: height,\r\n    hideRootNode: hideRootNode,\r\n    width: width,\r\n    getSize: getSize\r\n  });\r\n  var radialDomain = getRadialDomain(mappedData);\r\n  var margin = getRadialLayoutMargin(width, height, radialDomain);\r\n\r\n  var labelData = buildLabels(mappedData, {\r\n    getAngle: getAngle,\r\n    getAngle0: getAngle0,\r\n    getLabel: getLabel,\r\n    getRadius0: function getRadius0(d) {\r\n      return d.radius0;\r\n    }\r\n  });\r\n\r\n  var hofBuilder = function hofBuilder(f) {\r\n    return function (e, i) {\r\n      return f ? f(mappedData[e.index], i) : NOOP;\r\n    };\r\n  };\r\n  return React.createElement(\r\n    XYPlot,\r\n    {\r\n      height: height,\r\n      hasTreeStructure: true,\r\n      width: width,\r\n      className: predefinedClassName + ' ' + className,\r\n      margin: margin,\r\n      xDomain: [-radialDomain, radialDomain],\r\n      yDomain: [-radialDomain, radialDomain]\r\n    },\r\n    React.createElement(ArcSeries, _extends({\r\n      colorType: colorType\r\n    }, props, {\r\n      animation: animation,\r\n      radiusDomain: [0, radialDomain],\r\n      // need to present a stripped down version for interpolation\r\n      data: animation ? mappedData.map(function (row, index) {\r\n        return _extends({}, row, {\r\n          parent: null,\r\n          children: null,\r\n          index: index\r\n        });\r\n      }) : mappedData,\r\n      _data: animation ? mappedData : null,\r\n      arcClassName: predefinedClassName + '__series--radial__arc'\r\n    }, LISTENERS_TO_OVERWRITE.reduce(function (acc, propName) {\r\n      var prop = props[propName];\r\n      acc[propName] = animation ? hofBuilder(prop) : prop;\r\n      return acc;\r\n    }, {}))),\r\n    labelData.length > 0 && React.createElement(LabelSeries, { data: labelData, getLabel: getLabel }),\r\n    children\r\n  );\r\n}\r\n\r\nSunburst.displayName = 'Sunburst';\r\nSunburst.propTypes = {\r\n  animation: AnimationPropType,\r\n  getAngle: PropTypes.func,\r\n  getAngle0: PropTypes.func,\r\n  className: PropTypes.string,\r\n  colorType: PropTypes.string,\r\n  data: PropTypes.object.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  hideRootNode: PropTypes.bool,\r\n  getLabel: PropTypes.func,\r\n  onValueClick: PropTypes.func,\r\n  onValueMouseOver: PropTypes.func,\r\n  onValueMouseOut: PropTypes.func,\r\n  getSize: PropTypes.func,\r\n  width: PropTypes.number.isRequired,\r\n  padAngle: PropTypes.oneOfType([PropTypes.func, PropTypes.number])\r\n};\r\nSunburst.defaultProps = {\r\n  getAngle: function getAngle(d) {\r\n    return d.angle;\r\n  },\r\n  getAngle0: function getAngle0(d) {\r\n    return d.angle0;\r\n  },\r\n  className: '',\r\n  colorType: 'literal',\r\n  getColor: function getColor(d) {\r\n    return d.color;\r\n  },\r\n  hideRootNode: false,\r\n  getLabel: function getLabel(d) {\r\n    return d.label;\r\n  },\r\n  getSize: function getSize(d) {\r\n    return d.size;\r\n  },\r\n  padAngle: 0\r\n};\r\n\r\nexport default Sunburst;"]},"metadata":{},"sourceType":"module"}