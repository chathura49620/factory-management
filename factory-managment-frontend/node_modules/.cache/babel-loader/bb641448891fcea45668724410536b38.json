{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React from 'react';\nimport AbstractSeries from './series/abstract-series';\nimport { getAttributeScale } from '../utils/scales-utils';\nimport PropTypes from 'prop-types';\n\nfunction getLocs(evt) {\n  var xLoc = evt.type === 'touchstart' ? evt.pageX : evt.offsetX;\n  var yLoc = evt.type === 'touchstart' ? evt.pageY : evt.offsetY;\n  return {\n    xLoc: xLoc,\n    yLoc: yLoc\n  };\n}\n\nvar Highlight = function (_AbstractSeries) {\n  _inherits(Highlight, _AbstractSeries);\n\n  function Highlight() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Highlight);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Highlight.__proto__ || Object.getPrototypeOf(Highlight)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      dragging: false,\n      brushArea: {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      },\n      brushing: false,\n      startLocX: 0,\n      startLocY: 0,\n      dragArea: null\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Highlight, [{\n    key: '_getDrawArea',\n    value: function _getDrawArea(xLoc, yLoc) {\n      var _state = this.state,\n          startLocX = _state.startLocX,\n          startLocY = _state.startLocY;\n      var _props = this.props,\n          enableX = _props.enableX,\n          enableY = _props.enableY,\n          highlightWidth = _props.highlightWidth,\n          highlightHeight = _props.highlightHeight,\n          innerWidth = _props.innerWidth,\n          innerHeight = _props.innerHeight,\n          marginLeft = _props.marginLeft,\n          marginRight = _props.marginRight,\n          marginBottom = _props.marginBottom,\n          marginTop = _props.marginTop;\n      var plotHeight = innerHeight + marginTop + marginBottom;\n      var plotWidth = innerWidth + marginLeft + marginRight;\n      var touchWidth = highlightWidth || plotWidth;\n      var touchHeight = highlightHeight || plotHeight;\n      return {\n        bottom: enableY ? Math.max(startLocY, yLoc) : touchHeight,\n        right: enableX ? Math.max(startLocX, xLoc) : touchWidth,\n        left: enableX ? Math.min(xLoc, startLocX) : 0,\n        top: enableY ? Math.min(yLoc, startLocY) : 0\n      };\n    }\n  }, {\n    key: '_getDragArea',\n    value: function _getDragArea(xLoc, yLoc) {\n      var _props2 = this.props,\n          enableX = _props2.enableX,\n          enableY = _props2.enableY;\n      var _state2 = this.state,\n          startLocX = _state2.startLocX,\n          startLocY = _state2.startLocY,\n          dragArea = _state2.dragArea;\n      return {\n        bottom: dragArea.bottom + (enableY ? yLoc - startLocY : 0),\n        left: dragArea.left + (enableX ? xLoc - startLocX : 0),\n        right: dragArea.right + (enableX ? xLoc - startLocX : 0),\n        top: dragArea.top + (enableY ? yLoc - startLocY : 0)\n      };\n    }\n  }, {\n    key: '_clickedOutsideDrag',\n    value: function _clickedOutsideDrag(xLoc, yLoc) {\n      var _props3 = this.props,\n          enableX = _props3.enableX,\n          enableY = _props3.enableY;\n      var _state3 = this.state,\n          dragArea = _state3.dragArea,\n          _state3$brushArea = _state3.brushArea,\n          left = _state3$brushArea.left,\n          right = _state3$brushArea.right,\n          top = _state3$brushArea.top,\n          bottom = _state3$brushArea.bottom;\n      var clickedOutsideDragX = dragArea && (xLoc < left || xLoc > right);\n      var clickedOutsideDragY = dragArea && (yLoc < top || yLoc > bottom);\n\n      if (enableX && enableY) {\n        return clickedOutsideDragX || clickedOutsideDragY;\n      }\n\n      if (enableX) {\n        return clickedOutsideDragX;\n      }\n\n      if (enableY) {\n        return clickedOutsideDragY;\n      }\n\n      return true;\n    }\n  }, {\n    key: '_convertAreaToCoordinates',\n    value: function _convertAreaToCoordinates(brushArea) {\n      // NOTE only continuous scales are supported for brushing/getting coordinates back\n      var _props4 = this.props,\n          enableX = _props4.enableX,\n          enableY = _props4.enableY,\n          marginLeft = _props4.marginLeft,\n          marginTop = _props4.marginTop;\n      var xScale = getAttributeScale(this.props, 'x');\n      var yScale = getAttributeScale(this.props, 'y'); // Ensure that users wishes are being respected about which scales are evaluated\n      // this is specifically enabled to ensure brushing on mixed categorical and linear\n      // charts will run as expected\n\n      if (enableX && enableY) {\n        return {\n          bottom: yScale.invert(brushArea.bottom),\n          left: xScale.invert(brushArea.left - marginLeft),\n          right: xScale.invert(brushArea.right - marginLeft),\n          top: yScale.invert(brushArea.top)\n        };\n      }\n\n      if (enableY) {\n        return {\n          bottom: yScale.invert(brushArea.bottom - marginTop),\n          top: yScale.invert(brushArea.top - marginTop)\n        };\n      }\n\n      if (enableX) {\n        return {\n          left: xScale.invert(brushArea.left - marginLeft),\n          right: xScale.invert(brushArea.right - marginLeft)\n        };\n      }\n\n      return {};\n    }\n  }, {\n    key: 'startBrushing',\n    value: function startBrushing(e) {\n      var _this2 = this;\n\n      var _props5 = this.props,\n          onBrushStart = _props5.onBrushStart,\n          onDragStart = _props5.onDragStart,\n          drag = _props5.drag;\n      var dragArea = this.state.dragArea;\n\n      var _getLocs = getLocs(e.nativeEvent),\n          xLoc = _getLocs.xLoc,\n          yLoc = _getLocs.yLoc;\n\n      var startArea = function startArea(dragging, resetDrag) {\n        var emptyBrush = {\n          bottom: yLoc,\n          left: xLoc,\n          right: xLoc,\n          top: yLoc\n        };\n\n        _this2.setState({\n          dragging: dragging,\n          brushArea: dragArea && !resetDrag ? dragArea : emptyBrush,\n          brushing: !dragging,\n          startLocX: xLoc,\n          startLocY: yLoc\n        });\n      };\n\n      var clickedOutsideDrag = this._clickedOutsideDrag(xLoc, yLoc);\n\n      if (drag && !dragArea || !drag || clickedOutsideDrag) {\n        startArea(false, clickedOutsideDrag);\n\n        if (onBrushStart) {\n          onBrushStart(e);\n        }\n\n        return;\n      }\n\n      if (drag && dragArea) {\n        startArea(true, clickedOutsideDrag);\n\n        if (onDragStart) {\n          onDragStart(e);\n        }\n      }\n    }\n  }, {\n    key: 'stopBrushing',\n    value: function stopBrushing(e) {\n      var _state4 = this.state,\n          brushing = _state4.brushing,\n          dragging = _state4.dragging,\n          brushArea = _state4.brushArea; // Quickly short-circuit if the user isn't brushing in our component\n\n      if (!brushing && !dragging) {\n        return;\n      }\n\n      var _props6 = this.props,\n          onBrushEnd = _props6.onBrushEnd,\n          onDragEnd = _props6.onDragEnd,\n          drag = _props6.drag;\n      var noHorizontal = Math.abs(brushArea.right - brushArea.left) < 5;\n      var noVertical = Math.abs(brushArea.top - brushArea.bottom) < 5; // Invoke the callback with null if the selected area was < 5px\n\n      var isNulled = noVertical || noHorizontal; // Clear the draw area\n\n      this.setState({\n        brushing: false,\n        dragging: false,\n        brushArea: drag ? brushArea : {\n          top: 0,\n          right: 0,\n          bottom: 0,\n          left: 0\n        },\n        startLocX: 0,\n        startLocY: 0,\n        dragArea: drag && !isNulled && brushArea\n      });\n\n      if (brushing && onBrushEnd) {\n        onBrushEnd(!isNulled ? this._convertAreaToCoordinates(brushArea) : null);\n      }\n\n      if (drag && onDragEnd) {\n        onDragEnd(!isNulled ? this._convertAreaToCoordinates(brushArea) : null);\n      }\n    }\n  }, {\n    key: 'onBrush',\n    value: function onBrush(e) {\n      var _props7 = this.props,\n          onBrush = _props7.onBrush,\n          onDrag = _props7.onDrag,\n          drag = _props7.drag;\n      var _state5 = this.state,\n          brushing = _state5.brushing,\n          dragging = _state5.dragging;\n\n      var _getLocs2 = getLocs(e.nativeEvent),\n          xLoc = _getLocs2.xLoc,\n          yLoc = _getLocs2.yLoc;\n\n      if (brushing) {\n        var brushArea = this._getDrawArea(xLoc, yLoc);\n\n        this.setState({\n          brushArea: brushArea\n        });\n\n        if (onBrush) {\n          onBrush(this._convertAreaToCoordinates(brushArea));\n        }\n      }\n\n      if (drag && dragging) {\n        var _brushArea = this._getDragArea(xLoc, yLoc);\n\n        this.setState({\n          brushArea: _brushArea\n        });\n\n        if (onDrag) {\n          onDrag(this._convertAreaToCoordinates(_brushArea));\n        }\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      var _props8 = this.props,\n          color = _props8.color,\n          className = _props8.className,\n          highlightHeight = _props8.highlightHeight,\n          highlightWidth = _props8.highlightWidth,\n          highlightX = _props8.highlightX,\n          highlightY = _props8.highlightY,\n          innerWidth = _props8.innerWidth,\n          innerHeight = _props8.innerHeight,\n          marginLeft = _props8.marginLeft,\n          marginRight = _props8.marginRight,\n          marginTop = _props8.marginTop,\n          marginBottom = _props8.marginBottom,\n          opacity = _props8.opacity;\n      var _state$brushArea = this.state.brushArea,\n          left = _state$brushArea.left,\n          right = _state$brushArea.right,\n          top = _state$brushArea.top,\n          bottom = _state$brushArea.bottom;\n      var leftPos = 0;\n\n      if (highlightX) {\n        var xScale = getAttributeScale(this.props, 'x');\n        leftPos = xScale(highlightX);\n      }\n\n      var topPos = 0;\n\n      if (highlightY) {\n        var yScale = getAttributeScale(this.props, 'y');\n        topPos = yScale(highlightY);\n      }\n\n      var plotWidth = marginLeft + marginRight + innerWidth;\n      var plotHeight = marginTop + marginBottom + innerHeight;\n      var touchWidth = highlightWidth || plotWidth;\n      var touchHeight = highlightHeight || plotHeight;\n      return React.createElement('g', {\n        transform: 'translate(' + leftPos + ', ' + topPos + ')',\n        className: className + ' rv-highlight-container'\n      }, React.createElement('rect', {\n        className: 'rv-mouse-target',\n        fill: 'black',\n        opacity: '0',\n        x: '0',\n        y: '0',\n        width: Math.max(touchWidth, 0),\n        height: Math.max(touchHeight, 0),\n        onMouseDown: function onMouseDown(e) {\n          return _this3.startBrushing(e);\n        },\n        onMouseMove: function onMouseMove(e) {\n          return _this3.onBrush(e);\n        },\n        onMouseUp: function onMouseUp(e) {\n          return _this3.stopBrushing(e);\n        },\n        onMouseLeave: function onMouseLeave(e) {\n          return _this3.stopBrushing(e);\n        } // preventDefault() so that mouse event emulation does not happen\n        ,\n        onTouchEnd: function onTouchEnd(e) {\n          e.preventDefault();\n\n          _this3.stopBrushing(e);\n        },\n        onTouchCancel: function onTouchCancel(e) {\n          e.preventDefault();\n\n          _this3.stopBrushing(e);\n        },\n        onContextMenu: function onContextMenu(e) {\n          return e.preventDefault();\n        },\n        onContextMenuCapture: function onContextMenuCapture(e) {\n          return e.preventDefault();\n        }\n      }), React.createElement('rect', {\n        className: 'rv-highlight',\n        pointerEvents: 'none',\n        opacity: opacity,\n        fill: color,\n        x: left,\n        y: top,\n        width: Math.min(Math.max(0, right - left), touchWidth),\n        height: Math.min(Math.max(0, bottom - top), touchHeight)\n      }));\n    }\n  }]);\n\n  return Highlight;\n}(AbstractSeries);\n\nHighlight.displayName = 'HighlightOverlay';\nHighlight.defaultProps = {\n  color: 'rgb(77, 182, 172)',\n  className: '',\n  enableX: true,\n  enableY: true,\n  opacity: 0.3\n};\nHighlight.propTypes = _extends({}, AbstractSeries.propTypes, {\n  enableX: PropTypes.bool,\n  enableY: PropTypes.bool,\n  highlightHeight: PropTypes.number,\n  highlightWidth: PropTypes.number,\n  highlightX: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  highlightY: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  onBrushStart: PropTypes.func,\n  onDragStart: PropTypes.func,\n  onBrush: PropTypes.func,\n  onDrag: PropTypes.func,\n  onBrushEnd: PropTypes.func,\n  onDragEnd: PropTypes.func\n});\nexport default Highlight;","map":{"version":3,"sources":["C:/Users/thero/OneDrive/Documents/factory-management/factory-management/factory-managment-frontend/node_modules/react-vis/es/plot/highlight.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","React","AbstractSeries","getAttributeScale","PropTypes","getLocs","evt","xLoc","type","pageX","offsetX","yLoc","pageY","offsetY","Highlight","_AbstractSeries","_ref","_temp","_this","_ret","_len","args","Array","_key","getPrototypeOf","apply","concat","state","dragging","brushArea","top","right","bottom","left","brushing","startLocX","startLocY","dragArea","_getDrawArea","_state","_props","enableX","enableY","highlightWidth","highlightHeight","innerWidth","innerHeight","marginLeft","marginRight","marginBottom","marginTop","plotHeight","plotWidth","touchWidth","touchHeight","Math","max","min","_getDragArea","_props2","_state2","_clickedOutsideDrag","_props3","_state3","_state3$brushArea","clickedOutsideDragX","clickedOutsideDragY","_convertAreaToCoordinates","_props4","xScale","yScale","invert","startBrushing","e","_this2","_props5","onBrushStart","onDragStart","drag","_getLocs","nativeEvent","startArea","resetDrag","emptyBrush","setState","clickedOutsideDrag","stopBrushing","_state4","_props6","onBrushEnd","onDragEnd","noHorizontal","abs","noVertical","isNulled","onBrush","_props7","onDrag","_state5","_getLocs2","_brushArea","render","_this3","_props8","color","className","highlightX","highlightY","opacity","_state$brushArea","leftPos","topPos","createElement","transform","fill","x","y","width","height","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onTouchEnd","preventDefault","onTouchCancel","onContextMenu","onContextMenuCapture","pointerEvents","displayName","defaultProps","propTypes","bool","number","oneOfType","string","func"],"mappings":"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","sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\r\n\r\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\r\n\r\nimport React from 'react';\r\nimport AbstractSeries from './series/abstract-series';\r\nimport { getAttributeScale } from '../utils/scales-utils';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction getLocs(evt) {\r\n  var xLoc = evt.type === 'touchstart' ? evt.pageX : evt.offsetX;\r\n  var yLoc = evt.type === 'touchstart' ? evt.pageY : evt.offsetY;\r\n  return { xLoc: xLoc, yLoc: yLoc };\r\n}\r\n\r\nvar Highlight = function (_AbstractSeries) {\r\n  _inherits(Highlight, _AbstractSeries);\r\n\r\n  function Highlight() {\r\n    var _ref;\r\n\r\n    var _temp, _this, _ret;\r\n\r\n    _classCallCheck(this, Highlight);\r\n\r\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\r\n      args[_key] = arguments[_key];\r\n    }\r\n\r\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Highlight.__proto__ || Object.getPrototypeOf(Highlight)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\r\n      dragging: false,\r\n      brushArea: { top: 0, right: 0, bottom: 0, left: 0 },\r\n      brushing: false,\r\n      startLocX: 0,\r\n      startLocY: 0,\r\n      dragArea: null\r\n    }, _temp), _possibleConstructorReturn(_this, _ret);\r\n  }\r\n\r\n  _createClass(Highlight, [{\r\n    key: '_getDrawArea',\r\n    value: function _getDrawArea(xLoc, yLoc) {\r\n      var _state = this.state,\r\n          startLocX = _state.startLocX,\r\n          startLocY = _state.startLocY;\r\n      var _props = this.props,\r\n          enableX = _props.enableX,\r\n          enableY = _props.enableY,\r\n          highlightWidth = _props.highlightWidth,\r\n          highlightHeight = _props.highlightHeight,\r\n          innerWidth = _props.innerWidth,\r\n          innerHeight = _props.innerHeight,\r\n          marginLeft = _props.marginLeft,\r\n          marginRight = _props.marginRight,\r\n          marginBottom = _props.marginBottom,\r\n          marginTop = _props.marginTop;\r\n\r\n      var plotHeight = innerHeight + marginTop + marginBottom;\r\n      var plotWidth = innerWidth + marginLeft + marginRight;\r\n      var touchWidth = highlightWidth || plotWidth;\r\n      var touchHeight = highlightHeight || plotHeight;\r\n\r\n      return {\r\n        bottom: enableY ? Math.max(startLocY, yLoc) : touchHeight,\r\n        right: enableX ? Math.max(startLocX, xLoc) : touchWidth,\r\n        left: enableX ? Math.min(xLoc, startLocX) : 0,\r\n        top: enableY ? Math.min(yLoc, startLocY) : 0\r\n      };\r\n    }\r\n  }, {\r\n    key: '_getDragArea',\r\n    value: function _getDragArea(xLoc, yLoc) {\r\n      var _props2 = this.props,\r\n          enableX = _props2.enableX,\r\n          enableY = _props2.enableY;\r\n      var _state2 = this.state,\r\n          startLocX = _state2.startLocX,\r\n          startLocY = _state2.startLocY,\r\n          dragArea = _state2.dragArea;\r\n\r\n\r\n      return {\r\n        bottom: dragArea.bottom + (enableY ? yLoc - startLocY : 0),\r\n        left: dragArea.left + (enableX ? xLoc - startLocX : 0),\r\n        right: dragArea.right + (enableX ? xLoc - startLocX : 0),\r\n        top: dragArea.top + (enableY ? yLoc - startLocY : 0)\r\n      };\r\n    }\r\n  }, {\r\n    key: '_clickedOutsideDrag',\r\n    value: function _clickedOutsideDrag(xLoc, yLoc) {\r\n      var _props3 = this.props,\r\n          enableX = _props3.enableX,\r\n          enableY = _props3.enableY;\r\n      var _state3 = this.state,\r\n          dragArea = _state3.dragArea,\r\n          _state3$brushArea = _state3.brushArea,\r\n          left = _state3$brushArea.left,\r\n          right = _state3$brushArea.right,\r\n          top = _state3$brushArea.top,\r\n          bottom = _state3$brushArea.bottom;\r\n\r\n      var clickedOutsideDragX = dragArea && (xLoc < left || xLoc > right);\r\n      var clickedOutsideDragY = dragArea && (yLoc < top || yLoc > bottom);\r\n      if (enableX && enableY) {\r\n        return clickedOutsideDragX || clickedOutsideDragY;\r\n      }\r\n      if (enableX) {\r\n        return clickedOutsideDragX;\r\n      }\r\n      if (enableY) {\r\n        return clickedOutsideDragY;\r\n      }\r\n      return true;\r\n    }\r\n  }, {\r\n    key: '_convertAreaToCoordinates',\r\n    value: function _convertAreaToCoordinates(brushArea) {\r\n      // NOTE only continuous scales are supported for brushing/getting coordinates back\r\n      var _props4 = this.props,\r\n          enableX = _props4.enableX,\r\n          enableY = _props4.enableY,\r\n          marginLeft = _props4.marginLeft,\r\n          marginTop = _props4.marginTop;\r\n\r\n      var xScale = getAttributeScale(this.props, 'x');\r\n      var yScale = getAttributeScale(this.props, 'y');\r\n\r\n      // Ensure that users wishes are being respected about which scales are evaluated\r\n      // this is specifically enabled to ensure brushing on mixed categorical and linear\r\n      // charts will run as expected\r\n\r\n      if (enableX && enableY) {\r\n        return {\r\n          bottom: yScale.invert(brushArea.bottom),\r\n          left: xScale.invert(brushArea.left - marginLeft),\r\n          right: xScale.invert(brushArea.right - marginLeft),\r\n          top: yScale.invert(brushArea.top)\r\n        };\r\n      }\r\n\r\n      if (enableY) {\r\n        return {\r\n          bottom: yScale.invert(brushArea.bottom - marginTop),\r\n          top: yScale.invert(brushArea.top - marginTop)\r\n        };\r\n      }\r\n\r\n      if (enableX) {\r\n        return {\r\n          left: xScale.invert(brushArea.left - marginLeft),\r\n          right: xScale.invert(brushArea.right - marginLeft)\r\n        };\r\n      }\r\n\r\n      return {};\r\n    }\r\n  }, {\r\n    key: 'startBrushing',\r\n    value: function startBrushing(e) {\r\n      var _this2 = this;\r\n\r\n      var _props5 = this.props,\r\n          onBrushStart = _props5.onBrushStart,\r\n          onDragStart = _props5.onDragStart,\r\n          drag = _props5.drag;\r\n      var dragArea = this.state.dragArea;\r\n\r\n      var _getLocs = getLocs(e.nativeEvent),\r\n          xLoc = _getLocs.xLoc,\r\n          yLoc = _getLocs.yLoc;\r\n\r\n      var startArea = function startArea(dragging, resetDrag) {\r\n        var emptyBrush = {\r\n          bottom: yLoc,\r\n          left: xLoc,\r\n          right: xLoc,\r\n          top: yLoc\r\n        };\r\n        _this2.setState({\r\n          dragging: dragging,\r\n          brushArea: dragArea && !resetDrag ? dragArea : emptyBrush,\r\n          brushing: !dragging,\r\n          startLocX: xLoc,\r\n          startLocY: yLoc\r\n        });\r\n      };\r\n\r\n      var clickedOutsideDrag = this._clickedOutsideDrag(xLoc, yLoc);\r\n      if (drag && !dragArea || !drag || clickedOutsideDrag) {\r\n        startArea(false, clickedOutsideDrag);\r\n\r\n        if (onBrushStart) {\r\n          onBrushStart(e);\r\n        }\r\n        return;\r\n      }\r\n\r\n      if (drag && dragArea) {\r\n        startArea(true, clickedOutsideDrag);\r\n        if (onDragStart) {\r\n          onDragStart(e);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: 'stopBrushing',\r\n    value: function stopBrushing(e) {\r\n      var _state4 = this.state,\r\n          brushing = _state4.brushing,\r\n          dragging = _state4.dragging,\r\n          brushArea = _state4.brushArea;\r\n      // Quickly short-circuit if the user isn't brushing in our component\r\n\r\n      if (!brushing && !dragging) {\r\n        return;\r\n      }\r\n      var _props6 = this.props,\r\n          onBrushEnd = _props6.onBrushEnd,\r\n          onDragEnd = _props6.onDragEnd,\r\n          drag = _props6.drag;\r\n\r\n      var noHorizontal = Math.abs(brushArea.right - brushArea.left) < 5;\r\n      var noVertical = Math.abs(brushArea.top - brushArea.bottom) < 5;\r\n      // Invoke the callback with null if the selected area was < 5px\r\n      var isNulled = noVertical || noHorizontal;\r\n      // Clear the draw area\r\n      this.setState({\r\n        brushing: false,\r\n        dragging: false,\r\n        brushArea: drag ? brushArea : { top: 0, right: 0, bottom: 0, left: 0 },\r\n        startLocX: 0,\r\n        startLocY: 0,\r\n        dragArea: drag && !isNulled && brushArea\r\n      });\r\n\r\n      if (brushing && onBrushEnd) {\r\n        onBrushEnd(!isNulled ? this._convertAreaToCoordinates(brushArea) : null);\r\n      }\r\n\r\n      if (drag && onDragEnd) {\r\n        onDragEnd(!isNulled ? this._convertAreaToCoordinates(brushArea) : null);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'onBrush',\r\n    value: function onBrush(e) {\r\n      var _props7 = this.props,\r\n          onBrush = _props7.onBrush,\r\n          onDrag = _props7.onDrag,\r\n          drag = _props7.drag;\r\n      var _state5 = this.state,\r\n          brushing = _state5.brushing,\r\n          dragging = _state5.dragging;\r\n\r\n      var _getLocs2 = getLocs(e.nativeEvent),\r\n          xLoc = _getLocs2.xLoc,\r\n          yLoc = _getLocs2.yLoc;\r\n\r\n      if (brushing) {\r\n        var brushArea = this._getDrawArea(xLoc, yLoc);\r\n        this.setState({ brushArea: brushArea });\r\n\r\n        if (onBrush) {\r\n          onBrush(this._convertAreaToCoordinates(brushArea));\r\n        }\r\n      }\r\n\r\n      if (drag && dragging) {\r\n        var _brushArea = this._getDragArea(xLoc, yLoc);\r\n        this.setState({ brushArea: _brushArea });\r\n        if (onDrag) {\r\n          onDrag(this._convertAreaToCoordinates(_brushArea));\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: 'render',\r\n    value: function render() {\r\n      var _this3 = this;\r\n\r\n      var _props8 = this.props,\r\n          color = _props8.color,\r\n          className = _props8.className,\r\n          highlightHeight = _props8.highlightHeight,\r\n          highlightWidth = _props8.highlightWidth,\r\n          highlightX = _props8.highlightX,\r\n          highlightY = _props8.highlightY,\r\n          innerWidth = _props8.innerWidth,\r\n          innerHeight = _props8.innerHeight,\r\n          marginLeft = _props8.marginLeft,\r\n          marginRight = _props8.marginRight,\r\n          marginTop = _props8.marginTop,\r\n          marginBottom = _props8.marginBottom,\r\n          opacity = _props8.opacity;\r\n      var _state$brushArea = this.state.brushArea,\r\n          left = _state$brushArea.left,\r\n          right = _state$brushArea.right,\r\n          top = _state$brushArea.top,\r\n          bottom = _state$brushArea.bottom;\r\n\r\n\r\n      var leftPos = 0;\r\n      if (highlightX) {\r\n        var xScale = getAttributeScale(this.props, 'x');\r\n        leftPos = xScale(highlightX);\r\n      }\r\n\r\n      var topPos = 0;\r\n      if (highlightY) {\r\n        var yScale = getAttributeScale(this.props, 'y');\r\n        topPos = yScale(highlightY);\r\n      }\r\n\r\n      var plotWidth = marginLeft + marginRight + innerWidth;\r\n      var plotHeight = marginTop + marginBottom + innerHeight;\r\n      var touchWidth = highlightWidth || plotWidth;\r\n      var touchHeight = highlightHeight || plotHeight;\r\n\r\n      return React.createElement(\r\n        'g',\r\n        {\r\n          transform: 'translate(' + leftPos + ', ' + topPos + ')',\r\n          className: className + ' rv-highlight-container'\r\n        },\r\n        React.createElement('rect', {\r\n          className: 'rv-mouse-target',\r\n          fill: 'black',\r\n          opacity: '0',\r\n          x: '0',\r\n          y: '0',\r\n          width: Math.max(touchWidth, 0),\r\n          height: Math.max(touchHeight, 0),\r\n          onMouseDown: function onMouseDown(e) {\r\n            return _this3.startBrushing(e);\r\n          },\r\n          onMouseMove: function onMouseMove(e) {\r\n            return _this3.onBrush(e);\r\n          },\r\n          onMouseUp: function onMouseUp(e) {\r\n            return _this3.stopBrushing(e);\r\n          },\r\n          onMouseLeave: function onMouseLeave(e) {\r\n            return _this3.stopBrushing(e);\r\n          }\r\n          // preventDefault() so that mouse event emulation does not happen\r\n          , onTouchEnd: function onTouchEnd(e) {\r\n            e.preventDefault();\r\n            _this3.stopBrushing(e);\r\n          },\r\n          onTouchCancel: function onTouchCancel(e) {\r\n            e.preventDefault();\r\n            _this3.stopBrushing(e);\r\n          },\r\n          onContextMenu: function onContextMenu(e) {\r\n            return e.preventDefault();\r\n          },\r\n          onContextMenuCapture: function onContextMenuCapture(e) {\r\n            return e.preventDefault();\r\n          }\r\n        }),\r\n        React.createElement('rect', {\r\n          className: 'rv-highlight',\r\n          pointerEvents: 'none',\r\n          opacity: opacity,\r\n          fill: color,\r\n          x: left,\r\n          y: top,\r\n          width: Math.min(Math.max(0, right - left), touchWidth),\r\n          height: Math.min(Math.max(0, bottom - top), touchHeight)\r\n        })\r\n      );\r\n    }\r\n  }]);\r\n\r\n  return Highlight;\r\n}(AbstractSeries);\r\n\r\nHighlight.displayName = 'HighlightOverlay';\r\nHighlight.defaultProps = {\r\n  color: 'rgb(77, 182, 172)',\r\n  className: '',\r\n  enableX: true,\r\n  enableY: true,\r\n  opacity: 0.3\r\n};\r\n\r\nHighlight.propTypes = _extends({}, AbstractSeries.propTypes, {\r\n  enableX: PropTypes.bool,\r\n  enableY: PropTypes.bool,\r\n  highlightHeight: PropTypes.number,\r\n  highlightWidth: PropTypes.number,\r\n  highlightX: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n  highlightY: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n  onBrushStart: PropTypes.func,\r\n  onDragStart: PropTypes.func,\r\n  onBrush: PropTypes.func,\r\n  onDrag: PropTypes.func,\r\n  onBrushEnd: PropTypes.func,\r\n  onDragEnd: PropTypes.func\r\n});\r\n\r\nexport default Highlight;"]},"metadata":{},"sourceType":"module"}