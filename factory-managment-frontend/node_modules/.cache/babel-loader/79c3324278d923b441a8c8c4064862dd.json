{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { sankey, sankeyLinkHorizontal, sankeyLeft, sankeyRight, sankeyCenter, sankeyJustify } from 'd3-sankey';\nimport XYPlot from '../plot/xy-plot';\nimport { MarginPropType, getInnerDimensions } from '../utils/chart-utils';\nimport VerticalRectSeries from '../plot/series/vertical-rect-series';\nimport LabelSeries from '../plot/series/label-series';\nimport Voronoi from '../plot/voronoi';\nimport { DISCRETE_COLOR_RANGE } from '../theme';\nimport SankeyLink from './sankey-link';\n\nvar NOOP = function NOOP(f) {\n  return f;\n};\n\nvar ALIGNMENTS = {\n  justify: sankeyJustify,\n  center: sankeyCenter,\n  left: sankeyLeft,\n  right: sankeyRight\n};\nvar DEFAULT_MARGINS = {\n  top: 20,\n  left: 20,\n  right: 20,\n  bottom: 20\n};\n\nfunction Sankey(props) {\n  var align = props.align,\n      animation = props.animation,\n      children = props.children,\n      className = props.className,\n      hasVoronoi = props.hasVoronoi,\n      height = props.height,\n      hideLabels = props.hideLabels,\n      labelRotation = props.labelRotation,\n      layout = props.layout,\n      links = props.links,\n      linkOpacity = props.linkOpacity,\n      margin = props.margin,\n      nodePadding = props.nodePadding,\n      nodes = props.nodes,\n      nodeWidth = props.nodeWidth,\n      onValueClick = props.onValueClick,\n      onValueMouseOver = props.onValueMouseOver,\n      onValueMouseOut = props.onValueMouseOut,\n      onLinkClick = props.onLinkClick,\n      onLinkMouseOver = props.onLinkMouseOver,\n      onLinkMouseOut = props.onLinkMouseOut,\n      style = props.style,\n      width = props.width;\n  var nodesCopy = [].concat(_toConsumableArray(new Array(nodes.length))).map(function (e, i) {\n    return _extends({}, nodes[i]);\n  });\n  var linksCopy = [].concat(_toConsumableArray(new Array(links.length))).map(function (e, i) {\n    return _extends({}, links[i]);\n  });\n\n  var _getInnerDimensions = getInnerDimensions({\n    margin: margin,\n    height: height,\n    width: width\n  }, DEFAULT_MARGINS),\n      marginLeft = _getInnerDimensions.marginLeft,\n      marginTop = _getInnerDimensions.marginTop,\n      marginRight = _getInnerDimensions.marginRight,\n      marginBottom = _getInnerDimensions.marginBottom;\n\n  var sankeyInstance = sankey().extent([[marginLeft, marginTop], [width - marginRight, height - marginBottom - marginTop]]).nodeWidth(nodeWidth).nodePadding(nodePadding).nodes(nodesCopy).links(linksCopy).nodeAlign(ALIGNMENTS[align]).iterations(layout);\n  sankeyInstance(nodesCopy);\n  var nWidth = sankeyInstance.nodeWidth();\n  var path = sankeyLinkHorizontal();\n  return React.createElement(XYPlot, _extends({}, props, {\n    yType: 'literal',\n    className: 'rv-sankey ' + className\n  }), linksCopy.map(function (link, i) {\n    return React.createElement(SankeyLink, {\n      style: style.links,\n      data: path(link),\n      opacity: link.opacity || linkOpacity,\n      color: link.color,\n      onLinkClick: onLinkClick,\n      onLinkMouseOver: onLinkMouseOver,\n      onLinkMouseOut: onLinkMouseOut,\n      strokeWidth: Math.max(link.width, 1),\n      node: link,\n      nWidth: nWidth,\n      key: 'link-' + i\n    });\n  }), React.createElement(VerticalRectSeries, {\n    animation: animation,\n    className: className + ' rv-sankey__node',\n    data: nodesCopy.map(function (node) {\n      return _extends({}, node, {\n        y: node.y1 - marginTop,\n        y0: node.y0 - marginTop,\n        x: node.x1,\n        x0: node.x0,\n        color: node.color || DISCRETE_COLOR_RANGE[0],\n        sourceLinks: null,\n        targetLinks: null\n      });\n    }),\n    style: style.rects,\n    onValueClick: onValueClick,\n    onValueMouseOver: onValueMouseOver,\n    onValueMouseOut: onValueMouseOut,\n    colorType: 'literal'\n  }), !hideLabels && React.createElement(LabelSeries, {\n    animation: animation,\n    className: className,\n    rotation: labelRotation,\n    labelAnchorY: 'text-before-edge',\n    data: nodesCopy.map(function (node, i) {\n      return _extends({\n        x: node.x0 + (node.x0 < width / 2 ? nWidth + 10 : -10),\n        y: (node.y0 + node.y1) / 2 - marginTop,\n        label: node.name,\n        style: _extends({\n          textAnchor: node.x0 < width / 2 ? 'start' : 'end',\n          dy: '-.5em'\n        }, style.labels)\n      }, nodes[i]);\n    })\n  }), hasVoronoi && React.createElement(Voronoi, {\n    className: 'rv-sankey__voronoi',\n    extent: [[-marginLeft, -marginTop], [width + marginRight, height + marginBottom]],\n    nodes: nodesCopy,\n    onClick: onValueClick,\n    onHover: onValueMouseOver,\n    onBlur: onValueMouseOut,\n    x: function x(d) {\n      return d.x0 + (d.x1 - d.x0) / 2;\n    },\n    y: function y(d) {\n      return d.y0 + (d.y1 - d.y0) / 2;\n    }\n  }), children);\n}\n\nSankey.defaultProps = {\n  align: 'justify',\n  className: '',\n  hasVoronoi: false,\n  hideLabels: false,\n  labelRotation: 0,\n  layout: 50,\n  margin: DEFAULT_MARGINS,\n  nodePadding: 10,\n  nodeWidth: 10,\n  onValueMouseOver: NOOP,\n  onValueClick: NOOP,\n  onValueMouseOut: NOOP,\n  onLinkClick: NOOP,\n  onLinkMouseOver: NOOP,\n  onLinkMouseOut: NOOP,\n  style: {\n    links: {},\n    rects: {},\n    labels: {}\n  }\n};\nSankey.propTypes = {\n  align: PropTypes.oneOf(['justify', 'left', 'right', 'center']),\n  className: PropTypes.string,\n  hasVoronoi: PropTypes.bool,\n  height: PropTypes.number.isRequired,\n  hideLabels: PropTypes.bool,\n  labelRotation: PropTypes.number,\n  layout: PropTypes.number,\n  links: PropTypes.arrayOf(PropTypes.shape({\n    source: PropTypes.oneOfType([PropTypes.number, PropTypes.object]).isRequired,\n    target: PropTypes.oneOfType([PropTypes.number, PropTypes.object]).isRequired\n  })).isRequired,\n  margin: MarginPropType,\n  nodePadding: PropTypes.number,\n  nodes: PropTypes.arrayOf(PropTypes.object).isRequired,\n  nodeWidth: PropTypes.number,\n  onValueMouseOver: PropTypes.func,\n  onValueClick: PropTypes.func,\n  onValueMouseOut: PropTypes.func,\n  onLinkClick: PropTypes.func,\n  onLinkMouseOver: PropTypes.func,\n  onLinkMouseOut: PropTypes.func,\n  style: PropTypes.shape({\n    links: PropTypes.object,\n    rects: PropTypes.object,\n    labels: PropTypes.object\n  }),\n  width: PropTypes.number.isRequired\n};\nexport default Sankey;","map":{"version":3,"sources":["C:/Users/thero/OneDrive/Documents/factory-management/factory-management/factory-managment-frontend/node_modules/react-vis/es/sankey/index.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_toConsumableArray","arr","Array","isArray","arr2","from","React","PropTypes","sankey","sankeyLinkHorizontal","sankeyLeft","sankeyRight","sankeyCenter","sankeyJustify","XYPlot","MarginPropType","getInnerDimensions","VerticalRectSeries","LabelSeries","Voronoi","DISCRETE_COLOR_RANGE","SankeyLink","NOOP","f","ALIGNMENTS","justify","center","left","right","DEFAULT_MARGINS","top","bottom","Sankey","props","align","animation","children","className","hasVoronoi","height","hideLabels","labelRotation","layout","links","linkOpacity","margin","nodePadding","nodes","nodeWidth","onValueClick","onValueMouseOver","onValueMouseOut","onLinkClick","onLinkMouseOver","onLinkMouseOut","style","width","nodesCopy","concat","map","e","linksCopy","_getInnerDimensions","marginLeft","marginTop","marginRight","marginBottom","sankeyInstance","extent","nodeAlign","iterations","nWidth","path","createElement","yType","link","data","opacity","color","strokeWidth","Math","max","node","y","y1","y0","x","x1","x0","sourceLinks","targetLinks","rects","colorType","rotation","labelAnchorY","label","name","textAnchor","dy","labels","onClick","onHover","onBlur","d","defaultProps","propTypes","oneOf","string","bool","number","isRequired","arrayOf","shape","oneOfType","object","func"],"mappings":"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","sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { sankey, sankeyLinkHorizontal, sankeyLeft, sankeyRight, sankeyCenter, sankeyJustify } from 'd3-sankey';\nimport XYPlot from '../plot/xy-plot';\n\nimport { MarginPropType, getInnerDimensions } from '../utils/chart-utils';\nimport VerticalRectSeries from '../plot/series/vertical-rect-series';\nimport LabelSeries from '../plot/series/label-series';\nimport Voronoi from '../plot/voronoi';\nimport { DISCRETE_COLOR_RANGE } from '../theme';\n\nimport SankeyLink from './sankey-link';\nvar NOOP = function NOOP(f) {\n  return f;\n};\n\nvar ALIGNMENTS = {\n  justify: sankeyJustify,\n  center: sankeyCenter,\n  left: sankeyLeft,\n  right: sankeyRight\n};\n\nvar DEFAULT_MARGINS = {\n  top: 20,\n  left: 20,\n  right: 20,\n  bottom: 20\n};\n\nfunction Sankey(props) {\n  var align = props.align,\n      animation = props.animation,\n      children = props.children,\n      className = props.className,\n      hasVoronoi = props.hasVoronoi,\n      height = props.height,\n      hideLabels = props.hideLabels,\n      labelRotation = props.labelRotation,\n      layout = props.layout,\n      links = props.links,\n      linkOpacity = props.linkOpacity,\n      margin = props.margin,\n      nodePadding = props.nodePadding,\n      nodes = props.nodes,\n      nodeWidth = props.nodeWidth,\n      onValueClick = props.onValueClick,\n      onValueMouseOver = props.onValueMouseOver,\n      onValueMouseOut = props.onValueMouseOut,\n      onLinkClick = props.onLinkClick,\n      onLinkMouseOver = props.onLinkMouseOver,\n      onLinkMouseOut = props.onLinkMouseOut,\n      style = props.style,\n      width = props.width;\n\n  var nodesCopy = [].concat(_toConsumableArray(new Array(nodes.length))).map(function (e, i) {\n    return _extends({}, nodes[i]);\n  });\n  var linksCopy = [].concat(_toConsumableArray(new Array(links.length))).map(function (e, i) {\n    return _extends({}, links[i]);\n  });\n\n  var _getInnerDimensions = getInnerDimensions({\n    margin: margin,\n    height: height,\n    width: width\n  }, DEFAULT_MARGINS),\n      marginLeft = _getInnerDimensions.marginLeft,\n      marginTop = _getInnerDimensions.marginTop,\n      marginRight = _getInnerDimensions.marginRight,\n      marginBottom = _getInnerDimensions.marginBottom;\n\n  var sankeyInstance = sankey().extent([[marginLeft, marginTop], [width - marginRight, height - marginBottom - marginTop]]).nodeWidth(nodeWidth).nodePadding(nodePadding).nodes(nodesCopy).links(linksCopy).nodeAlign(ALIGNMENTS[align]).iterations(layout);\n  sankeyInstance(nodesCopy);\n\n  var nWidth = sankeyInstance.nodeWidth();\n  var path = sankeyLinkHorizontal();\n\n  return React.createElement(\n    XYPlot,\n    _extends({}, props, { yType: 'literal', className: 'rv-sankey ' + className }),\n    linksCopy.map(function (link, i) {\n      return React.createElement(SankeyLink, {\n        style: style.links,\n        data: path(link),\n        opacity: link.opacity || linkOpacity,\n        color: link.color,\n        onLinkClick: onLinkClick,\n        onLinkMouseOver: onLinkMouseOver,\n        onLinkMouseOut: onLinkMouseOut,\n        strokeWidth: Math.max(link.width, 1),\n        node: link,\n        nWidth: nWidth,\n        key: 'link-' + i\n      });\n    }),\n    React.createElement(VerticalRectSeries, {\n      animation: animation,\n      className: className + ' rv-sankey__node',\n      data: nodesCopy.map(function (node) {\n        return _extends({}, node, {\n          y: node.y1 - marginTop,\n          y0: node.y0 - marginTop,\n          x: node.x1,\n          x0: node.x0,\n          color: node.color || DISCRETE_COLOR_RANGE[0],\n          sourceLinks: null,\n          targetLinks: null\n        });\n      }),\n      style: style.rects,\n      onValueClick: onValueClick,\n      onValueMouseOver: onValueMouseOver,\n      onValueMouseOut: onValueMouseOut,\n      colorType: 'literal'\n    }),\n    !hideLabels && React.createElement(LabelSeries, {\n      animation: animation,\n      className: className,\n      rotation: labelRotation,\n      labelAnchorY: 'text-before-edge',\n      data: nodesCopy.map(function (node, i) {\n        return _extends({\n          x: node.x0 + (node.x0 < width / 2 ? nWidth + 10 : -10),\n          y: (node.y0 + node.y1) / 2 - marginTop,\n          label: node.name,\n          style: _extends({\n            textAnchor: node.x0 < width / 2 ? 'start' : 'end',\n            dy: '-.5em'\n          }, style.labels)\n        }, nodes[i]);\n      })\n    }),\n    hasVoronoi && React.createElement(Voronoi, {\n      className: 'rv-sankey__voronoi',\n      extent: [[-marginLeft, -marginTop], [width + marginRight, height + marginBottom]],\n      nodes: nodesCopy,\n      onClick: onValueClick,\n      onHover: onValueMouseOver,\n      onBlur: onValueMouseOut,\n      x: function x(d) {\n        return d.x0 + (d.x1 - d.x0) / 2;\n      },\n      y: function y(d) {\n        return d.y0 + (d.y1 - d.y0) / 2;\n      }\n    }),\n    children\n  );\n}\n\nSankey.defaultProps = {\n  align: 'justify',\n  className: '',\n  hasVoronoi: false,\n  hideLabels: false,\n  labelRotation: 0,\n  layout: 50,\n  margin: DEFAULT_MARGINS,\n  nodePadding: 10,\n  nodeWidth: 10,\n  onValueMouseOver: NOOP,\n  onValueClick: NOOP,\n  onValueMouseOut: NOOP,\n  onLinkClick: NOOP,\n  onLinkMouseOver: NOOP,\n  onLinkMouseOut: NOOP,\n  style: {\n    links: {},\n    rects: {},\n    labels: {}\n  }\n};\n\nSankey.propTypes = {\n  align: PropTypes.oneOf(['justify', 'left', 'right', 'center']),\n  className: PropTypes.string,\n  hasVoronoi: PropTypes.bool,\n  height: PropTypes.number.isRequired,\n  hideLabels: PropTypes.bool,\n  labelRotation: PropTypes.number,\n  layout: PropTypes.number,\n  links: PropTypes.arrayOf(PropTypes.shape({\n    source: PropTypes.oneOfType([PropTypes.number, PropTypes.object]).isRequired,\n    target: PropTypes.oneOfType([PropTypes.number, PropTypes.object]).isRequired\n  })).isRequired,\n  margin: MarginPropType,\n  nodePadding: PropTypes.number,\n  nodes: PropTypes.arrayOf(PropTypes.object).isRequired,\n  nodeWidth: PropTypes.number,\n  onValueMouseOver: PropTypes.func,\n  onValueClick: PropTypes.func,\n  onValueMouseOut: PropTypes.func,\n  onLinkClick: PropTypes.func,\n  onLinkMouseOver: PropTypes.func,\n  onLinkMouseOut: PropTypes.func,\n  style: PropTypes.shape({\n    links: PropTypes.object,\n    rects: PropTypes.object,\n    labels: PropTypes.object\n  }),\n  width: PropTypes.number.isRequired\n};\nexport default Sankey;"]},"metadata":{},"sourceType":"module"}